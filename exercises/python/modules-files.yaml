# exercises/python/modules-files.yaml
language: python
category: modules-files

exercises:
  # --- Imports Subconcept ---
  - slug: import-module
    objective: Import a module using the import statement
    title: Import Module
    difficulty: 1
    concept: modules-files
    subconcept: imports
    level: intro
    prereqs: [foundations]
    type: write
    pattern: import
    prompt: Import the math module
    expected_answer: import math
    hints:
      - Use import keyword
      - No quotes around module name
    tags: [imports, module, beginner]

  - slug: import-from
    objective: Import specific items from a module using from-import syntax
    title: Import from Module
    difficulty: 1
    concept: modules-files
    subconcept: imports
    level: intro
    prereqs: [modules-files.imports]
    type: write
    pattern: import
    prompt: Import only sqrt from the math module
    expected_answer: from math import sqrt
    hints:
      - Use from...import syntax
      - You can then use sqrt() directly without math prefix
    tags: [imports, from, specific]

  - slug: import-alias
    objective: Import a module with an alias using the as keyword
    title: Import with Alias
    difficulty: 2
    concept: modules-files
    subconcept: imports
    level: practice
    prereqs: [modules-files.imports]
    type: write
    pattern: import
    prompt: Import numpy as np
    expected_answer: import numpy as np
    hints:
      - Use 'as' for alias
      - Common convention in data science community
    tags: [imports, alias, convention]

  - slug: import-multiple
    objective: Import multiple items from a module in a single statement
    title: Import Multiple Items
    difficulty: 2
    concept: modules-files
    subconcept: imports
    level: practice
    prereqs: [modules-files.imports]
    type: write
    pattern: import
    prompt: Import sin and cos from math
    expected_answer: from math import sin, cos
    hints:
      - Comma-separate imports
      - All come after a single 'import' keyword
    tags: [imports, multiple, from]

  # --- Reading Subconcept ---
  - slug: file-open-read
    objective: Open a file for reading using the open() function
    title: Open File for Reading
    difficulty: 1
    concept: modules-files
    subconcept: reading
    level: intro
    prereqs: [foundations]
    type: write
    pattern: file
    prompt: Open file "data.txt" for reading
    expected_answer: open("data.txt", "r")
    accepted_solutions:
      - 'open("data.txt", "r")'
      - "open('data.txt', 'r')"
      - 'open("data.txt")'
      - "open('data.txt')"
    hints:
      - Use open() function
      - '"r" is default mode'
    tags: [files, open, read]

  - slug: file-read-all
    objective: Read the entire contents of a file using read()
    title: Read Entire File
    difficulty: 1
    concept: modules-files
    subconcept: reading
    level: intro
    prereqs: [modules-files.reading]
    type: write
    pattern: file
    prompt: Read entire contents of file object f
    expected_answer: f.read()
    hints:
      - Use read() method
      - Returns all content as a single string
    tags: [files, read, content]

  - slug: file-read-lines
    objective: Read all lines from a file as a list using readlines()
    title: Read Lines
    difficulty: 2
    concept: modules-files
    subconcept: reading
    level: practice
    prereqs: [modules-files.reading]
    type: write
    pattern: file
    prompt: Read all lines from file f as a list
    expected_answer: f.readlines()
    hints:
      - Use readlines() method
      - Each line becomes a list item with newline included
    tags: [files, read, lines]

  - slug: file-read-line
    objective: Read a single line from a file using readline()
    title: Read Single Line
    difficulty: 2
    concept: modules-files
    subconcept: reading
    level: practice
    prereqs: [modules-files.reading]
    type: write
    pattern: file
    prompt: Read one line from file f
    expected_answer: f.readline()
    hints:
      - Use readline() method
      - Call again to get the next line
    tags: [files, read, line]

  # --- Writing Subconcept ---
  - slug: file-open-write
    objective: Open a file for writing using write mode
    title: Open File for Writing
    difficulty: 1
    concept: modules-files
    subconcept: writing
    level: intro
    prereqs: [modules-files.reading]
    type: write
    pattern: file
    prompt: Open file "output.txt" for writing
    expected_answer: open("output.txt", "w")
    accepted_solutions:
      - 'open("output.txt", "w")'
      - "open('output.txt', 'w')"
    hints:
      - Use "w" mode for write
      - "Warning: 'w' mode overwrites existing content"
    tags: [files, open, write]

  - slug: file-write-text
    objective: Write text content to a file using write()
    title: Write to File
    difficulty: 1
    concept: modules-files
    subconcept: writing
    level: intro
    prereqs: [modules-files.writing]
    type: write
    pattern: file
    prompt: Write "Hello" to file object f
    expected_answer: f.write("Hello")
    accepted_solutions:
      - 'f.write("Hello")'
      - "f.write('Hello')"
    hints:
      - Use write() method
      - Returns number of characters written
    tags: [files, write, content]

  - slug: file-open-append
    objective: Open a file for appending using append mode
    title: Open File for Append
    difficulty: 2
    concept: modules-files
    subconcept: writing
    level: practice
    prereqs: [modules-files.writing]
    type: write
    pattern: file
    prompt: Open file "log.txt" for appending
    expected_answer: open("log.txt", "a")
    accepted_solutions:
      - 'open("log.txt", "a")'
      - "open('log.txt', 'a')"
    hints:
      - Use "a" mode for append
      - Preserves existing content, adds to end
    tags: [files, open, append]

  - slug: file-writelines
    objective: Write multiple lines to a file using writelines()
    title: Write Lines
    difficulty: 2
    concept: modules-files
    subconcept: writing
    level: practice
    prereqs: [modules-files.writing]
    type: write
    pattern: file
    prompt: Write list of lines to file f
    expected_answer: f.writelines(lines)
    hints:
      - Use writelines() method
      - Doesn't add newlines automatically
    tags: [files, write, lines]

  # --- Context Subconcept ---
  - slug: context-manager-open
    objective: Use a with statement for safe file handling
    title: With Statement for File
    difficulty: 2
    concept: modules-files
    subconcept: context
    level: intro
    prereqs: [modules-files.reading]
    type: write
    pattern: context
    prompt: Open file "data.txt" using a with statement, assigning to f
    expected_answer: 'with open("data.txt") as f:'
    accepted_solutions:
      - 'with open("data.txt") as f:'
      - "with open('data.txt') as f:"
      - 'with open("data.txt", "r") as f:'
      - "with open('data.txt', 'r') as f:"
    hints:
      - with statement auto-closes file
      - Use 'as' for variable
    tags: [files, context, with]

  - slug: context-intro
    objective: Use the with statement for automatic resource management
    title: Context Manager Intro
    difficulty: 1
    concept: modules-files
    subconcept: context
    level: intro
    prereqs: [reading]
    type: write
    pattern: context
    prompt: Open file "data.txt" for reading using a context manager
    expected_answer: 'with open("data.txt") as f:'
    accepted_solutions:
      - 'with open("data.txt") as f:'
      - "with open('data.txt') as f:"
      - 'with open("data.txt", "r") as f:'
      - "with open('data.txt', 'r') as f:"
    hints:
      - Use with statement for automatic cleanup
      - File closes automatically when block exits
    tags: [files, context, intro]

  - slug: context-manager-multiple
    objective: Use multiple context managers in a single with statement
    title: Multiple Context Managers
    difficulty: 2
    concept: modules-files
    subconcept: context
    level: practice
    prereqs: [modules-files.context]
    type: write
    pattern: context
    prompt: Open input.txt and output.txt simultaneously in a with statement
    expected_answer: 'with open("input.txt") as inp, open("output.txt", "w") as out:'
    accepted_solutions:
      - 'with open("input.txt") as inp, open("output.txt", "w") as out:'
      - "with open('input.txt') as inp, open('output.txt', 'w') as out:"
    hints:
      - Comma-separate context managers
      - Both files close automatically when done
    tags: [files, context, multiple]

  # --- Pathlib Subconcept ---
  - slug: pathlib-create-path
    objective: Create a Path object using the pathlib module
    title: Create Path Object
    difficulty: 1
    concept: modules-files
    subconcept: pathlib
    level: intro
    prereqs: [modules-files.imports]
    type: write
    pattern: construction
    prompt: Create a Path object for the current directory
    expected_answer: "Path('.')"
    accepted_solutions:
      - "Path('.')"
      - 'Path(".")'
      - "Path.cwd()"
    hints:
      - Import Path from pathlib
      - Use '.' for current directory
    tags: [pathlib, files]

  - slug: pathlib-intro
    objective: Create a Path object from a string
    title: Pathlib Intro
    difficulty: 1
    concept: modules-files
    subconcept: pathlib
    level: intro
    prereqs: [imports]
    type: write
    pattern: construction
    prompt: Create a Path object from string "data/file.txt"
    expected_answer: 'Path("data/file.txt")'
    accepted_solutions:
      - 'Path("data/file.txt")'
      - "Path('data/file.txt')"
    hints:
      - Path is imported from pathlib
      - Pass the string path to the constructor
    tags: [pathlib, path, intro]

  - slug: pathlib-join-paths
    objective: Join multiple path components using the / operator
    title: Join Paths with Operator
    difficulty: 2
    concept: modules-files
    subconcept: pathlib
    level: practice
    prereqs: [modules-files.pathlib]
    type: write
    pattern: construction
    prompt: Join Path object base with "subdir" and "file.txt" using the / operator
    expected_answer: base / "subdir" / "file.txt"
    accepted_solutions:
      - base / "subdir" / "file.txt"
      - base / 'subdir' / 'file.txt'
    hints:
      - Use / operator between Path and strings
      - Chain multiple / operators
    tags: [pathlib, join, operator]

  - slug: pathlib-get-parent
    objective: Get the parent directory of a Path object
    title: Get Path Parent
    difficulty: 2
    concept: modules-files
    subconcept: pathlib
    level: practice
    prereqs: [modules-files.pathlib]
    type: write
    pattern: attribute
    prompt: Get the parent directory of Path object p
    expected_answer: p.parent
    hints:
      - Use the parent attribute
      - Returns a Path object representing the directory
    tags: [pathlib, parent, navigation]

  - slug: pathlib-check-exists
    objective: Check if a path exists and determine its type using pathlib methods
    title: Check Path Exists and Type
    difficulty: 3
    concept: modules-files
    subconcept: pathlib
    level: edge
    prereqs: [modules-files.pathlib]
    type: write
    pattern: conditional
    prompt: Check if Path p exists and is a directory
    expected_answer: p.exists() and p.is_dir()
    accepted_solutions:
      - p.exists() and p.is_dir()
      - p.is_dir()
    hints:
      - Use exists() to check existence
      - Use is_dir() to check if directory
      - Combine with 'and' operator
    tags: [pathlib, exists, is_dir, validation]

  # --- Main Guard Subconcept ---
  - slug: main-guard-basic
    objective: Write the if __name__ == "__main__" guard statement
    title: Basic Main Guard
    difficulty: 1
    concept: modules-files
    subconcept: main-guard
    level: intro
    prereqs: [modules-files.imports]
    type: write
    pattern: conditional
    prompt: Write the standard Python main guard check
    expected_answer: 'if __name__ == "__main__":'
    accepted_solutions:
      - 'if __name__ == "__main__":'
      - "if __name__ == '__main__':"
    hints:
      - Check if __name__ equals "__main__"
      - This runs code only when script is executed directly
    tags: [main, guard, module]

  - slug: main-guard-call-main
    objective: Write a main guard that calls a main() function
    title: Main Guard with Function Call
    difficulty: 2
    concept: modules-files
    subconcept: main-guard
    level: practice
    prereqs: [modules-files.main-guard]
    type: write
    pattern: conditional
    prompt: Write main guard that calls main() function
    expected_answer: |
      if __name__ == "__main__":
          main()
    accepted_solutions:
      - |
        if __name__ == "__main__":
            main()
      - |
        if __name__ == '__main__':
            main()
    hints:
      - First write the guard condition
      - Then call main() inside the block
    tags: [main, guard, function]

  - slug: main-guard-with-definition
    objective: Define a main function and call it from within a main guard
    title: Main Function with Guard
    difficulty: 3
    concept: modules-files
    subconcept: main-guard
    level: edge
    prereqs: [main-guard, fn-basics]
    type: write
    pattern: function
    prompt: Define a main() function that prints "Running" and call it from a main guard
    expected_answer: |
      def main():
          print("Running")

      if __name__ == "__main__":
          main()
    accepted_solutions:
      - |
        def main():
            print("Running")

        if __name__ == "__main__":
            main()
      - |
        def main():
            print('Running')

        if __name__ == '__main__':
            main()
    hints:
      - Define the main function first
      - Add the main guard after the function
      - Call main() inside the guard block
    tags: [main, guard, function, definition]

  # --- Fill-in Exercises ---
  - slug: import-keyword-fill
    objective: Complete the import statement
    title: Import Keyword Fill-in
    difficulty: 1
    concept: modules-files
    subconcept: imports
    level: intro
    prereqs: []
    type: fill-in
    blank_position: 0
    pattern: import
    prompt: Complete to import the os module
    template: "___ os"
    expected_answer: "import"
    hints:
      - Keyword to bring in a module
      - Goes at the start of the statement
    tags: [imports, fill-in]

  - slug: from-import-fill
    objective: Complete the from-import syntax
    title: From Import Fill-in
    difficulty: 1
    concept: modules-files
    subconcept: imports
    level: intro
    prereqs: [modules-files.imports]
    type: fill-in
    blank_position: 0
    pattern: import
    prompt: Complete to import sqrt from math
    template: "___ math import sqrt"
    expected_answer: "from"
    hints:
      - Keyword for selective imports
      - Specifies which module to import from
    tags: [imports, from, fill-in]

  - slug: with-keyword-fill
    objective: Complete the context manager syntax
    title: With Keyword Fill-in
    difficulty: 2
    concept: modules-files
    subconcept: context
    level: practice
    prereqs: [modules-files.reading]
    type: fill-in
    blank_position: 0
    pattern: context
    prompt: Complete to open file safely
    template: '___ open("file.txt") as f:'
    expected_answer: "with"
    hints:
      - Keyword for context managers
      - Ensures file closes even if error occurs
    tags: [files, with, fill-in]

  # --- Predict Exercises ---
  - slug: name-main-predict
    objective: Predict __name__ behavior
    title: Name Main Predict
    difficulty: 2
    concept: modules-files
    subconcept: main-guard
    level: intro
    prereqs: [modules-files.main-guard]
    type: predict
    pattern: conditional
    prompt: What does __name__ equal when script runs directly?
    code: |
      # Running: python script.py
      print(__name__)
    expected_answer: "__main__"
    hints:
      - __name__ is "__main__" when run directly
      - Different when imported as a module
    tags: [modules, main, predict]

  - slug: file-read-predict
    objective: Predict file read output
    title: File Read Predict
    difficulty: 2
    concept: modules-files
    subconcept: reading
    level: practice
    prereqs: [modules-files.reading]
    type: predict
    pattern: file
    prompt: If file.txt contains "hello", what prints?
    code: |
      with open("file.txt") as f:
          content = f.read()
      print(len(content))
    expected_answer: "5"
    hints:
      - '"hello" has 5 characters'
      - len() counts all characters read
    tags: [files, read, predict]

  - slug: path-join-predict
    objective: Predict Path join result
    title: Path Join Predict
    difficulty: 2
    concept: modules-files
    subconcept: pathlib
    level: practice
    prereqs: [modules-files.pathlib]
    type: predict
    pattern: construction
    prompt: What does this produce?
    code: |
      from pathlib import Path
      p = Path("home") / "user" / "file.txt"
      print(p)
    expected_answer: "home/user/file.txt"
    hints:
      - / operator joins path components
      - Creates OS-appropriate path separators
    tags: [pathlib, join, predict]

  # --- Dynamic Exercises (using generators) ---
  - slug: path-join-dynamic
    objective: Predict the result of joining path components
    title: Dynamic Path Join
    difficulty: 2
    concept: modules-files
    subconcept: pathlib
    level: practice
    prereqs: [modules-files.pathlib]
    type: predict
    pattern: construction
    generator: path-ops
    prompt: "What does this code print?"
    code: |
      from pathlib import Path
      p = Path("{{dir1}}") / "{{dir2}}" / "{{filename}}"
      print(p)
    expected_answer: "{{fullPath}}"
    hints:
      - The / operator joins path components
      - Result is a complete path string
    tags: [pathlib, join, dynamic]

  - slug: path-parent-dynamic
    objective: Predict the parent directory of a path
    title: Dynamic Path Parent
    difficulty: 2
    concept: modules-files
    subconcept: pathlib
    level: practice
    prereqs: [modules-files.pathlib]
    type: predict
    pattern: attribute
    generator: path-ops
    prompt: "What does p.parent return?"
    code: |
      from pathlib import Path
      p = Path("{{fullPath}}")
      print(p.parent)
    expected_answer: "{{parent}}"
    hints:
      - .parent gives the directory containing the file
      - Returns a Path object, not a string
    tags: [pathlib, parent, dynamic]

  - slug: path-stem-dynamic
    objective: Predict the filename without extension
    title: Dynamic Path Stem
    difficulty: 2
    concept: modules-files
    subconcept: pathlib
    level: practice
    prereqs: [modules-files.pathlib]
    type: predict
    pattern: attribute
    generator: path-ops
    prompt: "What does p.stem return?"
    code: |
      from pathlib import Path
      p = Path("{{fullPath}}")
      print(p.stem)
    expected_answer: "{{stem}}"
    hints:
      - .stem is the filename without extension
      - "Example: 'file' from 'file.txt'"
    tags: [pathlib, stem, dynamic]

  - slug: path-suffix-dynamic
    objective: Predict the file extension
    title: Dynamic Path Suffix
    difficulty: 2
    concept: modules-files
    subconcept: pathlib
    level: practice
    prereqs: [modules-files.pathlib]
    type: predict
    pattern: attribute
    generator: path-ops
    prompt: "What does p.suffix return?"
    code: |
      from pathlib import Path
      p = Path("{{fullPath}}")
      print(p.suffix)
    expected_answer: "{{suffix}}"
    hints:
      - .suffix is the file extension including the dot
      - "Example: '.txt' from 'file.txt'"
    tags: [pathlib, suffix, dynamic]

  # --- File I/O Exercises (using file-io generator) ---
  - slug: file-read-dynamic
    objective: Predict the output of reading a file
    title: Dynamic File Read
    difficulty: 2
    concept: modules-files
    subconcept: reading
    level: practice
    prereqs: [reading]
    type: predict
    pattern: file
    generator: file-io
    prompt: "What does this code print? (Assume {{filename}} contains '{{content}}')"
    code: "{{code}}"
    expected_answer: "{{result}}"
    hints:
      - "This will {{description}}"
      - The with statement ensures proper file handling
    tags: [files, io, dynamic]

  - slug: file-context-dynamic
    objective: Predict behavior of file context manager
    title: Dynamic File Context
    difficulty: 2
    concept: modules-files
    subconcept: reading
    level: practice
    prereqs: [reading]
    type: predict
    pattern: context
    generator: file-io
    prompt: "What does this code print?"
    code: "{{code}}"
    expected_answer: "{{result}}"
    hints:
      - "Context managers automatically close files"
      - "Check the file's closed property"
    tags: [files, context, dynamic]

  - slug: file-write-mode-dynamic
    objective: Write code to open a file for writing
    title: Dynamic File Write Mode
    difficulty: 2
    concept: modules-files
    subconcept: reading
    level: practice
    prereqs: [reading]
    type: write
    pattern: file
    generator: file-io
    prompt: "Write code to open '{{filename}}' in '{{mode}}' mode using a context manager"
    expected_answer: 'with open("{{filename}}", "{{mode}}") as f:'
    accepted_solutions:
      - 'with open("{{filename}}", "{{mode}}") as f:'
      - "with open('{{filename}}', '{{mode}}') as f:"
    hints:
      - Use the with statement for context management
      - open() takes filename and mode arguments
    tags: [files, write, dynamic]