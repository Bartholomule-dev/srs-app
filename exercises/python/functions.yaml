# exercises/python/functions.yaml
language: python
category: functions

exercises:
  - slug: define-function
    objective: "Define a basic function using the def keyword"
    title: Define Function
    difficulty: 1
    prompt: Define a function called greet that takes a name parameter
    expected_answer: "def greet(name):"
    hints:
      - Start with the def keyword
      - End the line with a colon like if statements
    tags: [functions, def, beginner]
    concept: functions
    subconcept: fn-basics
    level: intro
    prereqs: [foundations]
    type: write
    pattern: definition

  - slug: function-return
    objective: "Write a function that returns a computed value"
    title: Function with Return
    difficulty: 2
    prompt: Define a function add that takes a and b, returns their sum
    expected_answer: |
      def add(a, b):
          return a + b
    hints:
      - Use return to send back a value
      - The body is indented under the def line
    tags: [functions, return, parameters]
    concept: functions
    subconcept: fn-basics
    level: intro
    prereqs: [foundations]
    type: write
    pattern: definition

  # --- Arguments Subconcept Intro ---
  - slug: positional-arg-intro
    objective: Call a function with positional arguments
    title: Positional Arguments
    difficulty: 1
    concept: functions
    subconcept: arguments
    level: intro
    prereqs: [fn-basics]
    type: write
    pattern: invocation
    prompt: Call function add with arguments 5 and 3 (positional)
    expected_answer: "add(5, 3)"
    hints:
      - Arguments are separated by commas
      - Order matters for positional args
    tags: [functions, arguments, positional]

  - slug: keyword-arg-intro
    objective: Call a function using keyword argument syntax
    title: Keyword Arguments Intro
    difficulty: 1
    concept: functions
    subconcept: arguments
    level: intro
    prereqs: [fn-basics]
    type: write
    pattern: invocation
    prompt: Call greet with name="Alice" as a keyword argument
    expected_answer: 'greet(name="Alice")'
    accepted_solutions:
      - 'greet(name="Alice")'
      - "greet(name='Alice')"
    hints:
      - Use name=value syntax
      - The parameter name goes before the equals sign
    tags: [functions, arguments, keyword]

  - slug: mixed-args-intro
    objective: Combine positional and keyword arguments in a function call
    title: Mixed Arguments
    difficulty: 2
    concept: functions
    subconcept: arguments
    level: intro
    prereqs: [fn-basics]
    type: write
    pattern: invocation
    prompt: Call connect with "localhost" positional, port=8080 keyword
    expected_answer: 'connect("localhost", port=8080)'
    accepted_solutions:
      - 'connect("localhost", port=8080)'
      - "connect('localhost', port=8080)"
    hints:
      - Positional arguments come first
      - Keyword arguments follow positional ones
    tags: [functions, arguments, mixed]

  - slug: kwargs-function
    objective: "Use **kwargs to accept variable keyword arguments"
    title: Keyword Arguments
    difficulty: 3
    prompt: Define a function config that accepts any keyword arguments
    expected_answer: "def config(**kwargs):"
    hints:
      - Use **kwargs (double asterisk) for keyword arguments
      - kwargs becomes a dictionary of name=value pairs
    tags: [functions, kwargs, advanced]
    concept: functions
    subconcept: arguments
    level: edge
    prereqs: [foundations, fn-basics, arguments]
    type: write
    pattern: definition

  # --- Additional Basics Subconcept ---
  - slug: function-no-params
    objective: "Define a function with no parameters"
    title: Function No Parameters
    difficulty: 1
    concept: functions
    subconcept: fn-basics
    level: intro
    prereqs: [foundations]
    type: write
    pattern: definition
    prompt: Define a function called say_hello with no parameters
    expected_answer: "def say_hello():"
    hints:
      - Empty parentheses () for no parameters
      - Still need the parentheses even with no args
    tags: [functions, definition, beginner]

  - slug: function-call
    objective: "Call a function with an argument"
    title: Call Function
    difficulty: 1
    concept: functions
    subconcept: fn-basics
    level: intro
    prereqs: [functions.fn-basics]
    type: write
    pattern: invocation
    prompt: Call function greet with argument "Alice"
    expected_answer: greet("Alice")
    accepted_solutions:
      - 'greet("Alice")'
      - "greet('Alice')"
    hints:
      - Function name followed by parentheses
      - Arguments go inside the parentheses
    tags: [functions, call, beginner]

  - slug: function-multiple-return
    objective: "Return multiple values from a function using tuple unpacking"
    title: Return Multiple Values
    difficulty: 2
    concept: functions
    subconcept: fn-basics
    level: practice
    prereqs: [functions.fn-basics]
    type: write
    pattern: definition
    prompt: Return both x and y from a function (tuple return)
    expected_answer: return x, y
    hints:
      - Comma-separated values become a tuple
      - Caller can unpack with a, b = func()
    tags: [functions, return, tuple]

  # --- Additional Arguments Subconcept ---
  - slug: keyword-only-args
    objective: "Define keyword-only parameters using the * separator"
    title: Keyword-Only Arguments
    difficulty: 3
    concept: functions
    subconcept: arguments
    level: edge
    prereqs: [functions.arguments]
    type: write
    pattern: definition
    prompt: Define func(a, *, b) where b must be passed as keyword
    expected_answer: "def func(a, *, b):"
    hints:
      - "Bare '*' separates positional from keyword-only params"
      - "Call with func(1, b=2), not func(1, 2)"
    tags: [functions, arguments, keyword-only]

  - slug: positional-only-args
    objective: "Define positional-only parameters using the / separator"
    title: Positional-Only Arguments
    difficulty: 3
    concept: functions
    subconcept: arguments
    level: edge
    prereqs: [functions.arguments]
    type: write
    pattern: definition
    prompt: Define func(a, /, b) where a must be passed positionally
    expected_answer: "def func(a, /, b):"
    hints:
      - / separates positional-only from other params
      - Python 3.8+ feature
    tags: [functions, arguments, positional-only]

  # --- Lambda Subconcept ---
  - slug: lambda-simple
    objective: "Write a lambda function for simple expressions"
    title: Simple Lambda
    difficulty: 2
    concept: functions
    subconcept: lambda
    level: intro
    prereqs: [functions.fn-basics]
    type: write
    pattern: definition
    prompt: Create a lambda that doubles its input x
    expected_answer: "lambda x: x * 2"
    hints:
      - "Format is: lambda args: expression"
      - No def keyword, no return keyword needed
    tags: [functions, lambda, beginner]

  - slug: lambda-two-args
    objective: "Create a lambda with multiple parameters"
    title: Lambda Two Arguments
    difficulty: 2
    concept: functions
    subconcept: lambda
    level: practice
    prereqs: [functions.lambda]
    type: write
    pattern: definition
    prompt: Create a lambda that adds two numbers x and y
    expected_answer: "lambda x, y: x + y"
    hints:
      - Multiple args separated by comma before the colon
      - Expression after colon is the return value
    tags: [functions, lambda, arguments]

  - slug: lambda-conditional
    objective: "Use a ternary expression inside a lambda function"
    title: Lambda with Conditional
    difficulty: 3
    concept: functions
    subconcept: lambda
    level: edge
    prereqs: [functions.lambda]
    type: write
    pattern: definition
    prompt: Create a lambda that returns "even" if x is even, "odd" otherwise
    expected_answer: 'lambda x: "even" if x % 2 == 0 else "odd"'
    accepted_solutions:
      - 'lambda x: "even" if x % 2 == 0 else "odd"'
      - "lambda x: 'even' if x % 2 == 0 else 'odd'"
    hints:
      - "Use ternary: value_if_true if condition else value_if_false"
      - Use modulo (%) to check even/odd
    tags: [functions, lambda, conditional]

  - slug: sorted-key-lambda
    objective: "Apply a lambda as a key function for sorting"
    title: Sorted with Lambda Key
    difficulty: 2
    concept: functions
    subconcept: lambda
    level: integrated
    prereqs: [functions.lambda, collections.lists]
    type: write
    pattern: construction
    targets: [lambda, lists]
    prompt: Sort list of tuples by second element using lambda
    expected_answer: "sorted(items, key=lambda x: x[1])"
    hints:
      - Use key parameter
      - Lambda extracts sort key
    tags: [functions, lambda, sorting]

  # --- Scope Subconcept ---
  - slug: scope-intro
    objective: Understand that variables defined inside functions are local
    title: Local Scope Basics
    difficulty: 2
    concept: functions
    subconcept: scope
    level: intro
    prereqs: [functions.fn-basics]
    type: predict
    pattern: scope
    prompt: What does this print?
    code: |
      x = 10
      def foo():
          x = 20
          print(x)
      foo()
    expected_answer: "20"
    hints:
      - Inside the function, x is local
      - Local x shadows global x
    tags: [functions, scope, intro]

  - slug: scope-global-read
    objective: Understand that functions can read global variables
    title: Reading Global Variables
    difficulty: 2
    concept: functions
    subconcept: scope
    level: intro
    prereqs: [functions.fn-basics]
    type: predict
    pattern: scope
    prompt: What does this print?
    code: |
      x = 10
      def foo():
          print(x)
      foo()
    expected_answer: "10"
    hints:
      - No local x, so Python looks in global scope
      - Functions can read globals without declaration
    tags: [functions, scope, intro, global]

  - slug: global-keyword
    objective: "Declare a global variable from within a function"
    title: Global Keyword
    difficulty: 2
    concept: functions
    subconcept: scope
    level: practice
    prereqs: [fn-basics]
    type: write
    pattern: declaration
    prompt: Declare counter as a global variable inside a function
    expected_answer: global counter
    hints:
      - Use global keyword
      - Declares that variable refers to module-level scope
    tags: [functions, scope, global]

  - slug: nonlocal-keyword
    objective: "Access an enclosing function's variable using nonlocal"
    title: Nonlocal Keyword
    difficulty: 3
    concept: functions
    subconcept: scope
    level: edge
    prereqs: [functions.scope]
    type: write
    pattern: declaration
    prompt: Access outer function variable x from inner function using nonlocal
    expected_answer: nonlocal x
    hints:
      - nonlocal for enclosing scope
      - Not global, not local
    tags: [functions, scope, nonlocal]

  # --- Type Hints Subconcept ---
  - slug: typehint-param
    objective: "Add type hints to function parameters"
    title: Type Hint Parameter
    difficulty: 2
    concept: functions
    subconcept: typehints
    level: intro
    prereqs: [fn-basics]
    type: write
    pattern: definition
    prompt: Define greet(name) with name typed as str
    expected_answer: "def greet(name: str):"
    hints:
      - "Use : type after parameter"
      - Type hints are optional but improve IDE support
    tags: [functions, typehints, annotation]

  - slug: typehint-return
    objective: "Annotate a function's return type"
    title: Type Hint Return
    difficulty: 2
    concept: functions
    subconcept: typehints
    level: intro
    prereqs: [functions.typehints]
    type: write
    pattern: definition
    prompt: Define add(a, b) returning int
    expected_answer: "def add(a, b) -> int:"
    hints:
      - Use -> type before colon
      - Return type annotation comes after parameters
    tags: [functions, typehints, return]

  - slug: typehint-list
    objective: "Use generic type hints for collection parameters"
    title: Type Hint List
    difficulty: 2
    concept: functions
    subconcept: typehints
    level: practice
    prereqs: [functions.typehints]
    type: write
    pattern: definition
    prompt: Define process(items) with items typed as list[int]
    expected_answer: "def process(items: list[int]):"
    hints:
      - Generic types use []
      - Python 3.9+ allows list[int] directly
    tags: [functions, typehints, generic]

  - slug: typehint-optional
    objective: "Define an optional parameter type using union syntax"
    title: Type Hint Optional
    difficulty: 2
    concept: functions
    subconcept: typehints
    level: edge
    prereqs: [functions.typehints]
    type: write
    pattern: definition
    prompt: Define find(name) with name typed as str or None
    expected_answer: "def find(name: str | None):"
    accepted_solutions:
      - "def find(name: str | None):"
      - "def find(name: Optional[str]):"
    hints:
      - Use | None for optional
      - Or Optional[type]
    tags: [functions, typehints, optional]

  - slug: typehint-callable
    objective: "Type hint a function parameter as a Callable"
    title: Type Hint Callable
    difficulty: 3
    concept: functions
    subconcept: typehints
    level: integrated
    prereqs: [functions.typehints, functions.lambda]
    type: write
    pattern: definition
    targets: [typehints, lambda]
    prompt: Define apply(func) where func is a callable taking int and returning int
    expected_answer: "def apply(func: Callable[[int], int]):"
    hints:
      - Callable[[args], return]
      - Import from typing
    tags: [functions, typehints, callable]

  # --- Defaults Subconcept ---
  - slug: default-param-intro
    objective: Define a function parameter with a default value
    title: Default Parameter Intro
    difficulty: 1
    concept: functions
    subconcept: defaults
    level: intro
    prereqs: [fn-basics]
    type: write
    pattern: definition
    prompt: Define function greet with name parameter defaulting to "World"
    expected_answer: 'def greet(name="World"):'
    accepted_solutions:
      - 'def greet(name="World"):'
      - "def greet(name='World'):"
    hints:
      - Use = to set the default value
      - Default goes after the parameter name
    tags: [functions, defaults, intro]

  - slug: default-param-simple
    objective: "Define a function with a single default parameter value"
    title: Default Parameter Simple
    difficulty: 1
    concept: functions
    subconcept: defaults
    level: intro
    prereqs: [fn-basics]
    type: write
    pattern: definition
    prompt: Define greet(name, greeting="Hello") with a default greeting
    expected_answer: 'def greet(name, greeting="Hello"):'
    accepted_solutions:
      - 'def greet(name, greeting="Hello"):'
      - "def greet(name, greeting='Hello'):"
    hints:
      - Default values use =
      - Put defaults after required params
    tags: [functions, defaults]

  - slug: default-param-multiple
    objective: "Define a function with multiple default parameter values"
    title: Multiple Default Parameters
    difficulty: 2
    concept: functions
    subconcept: defaults
    level: practice
    prereqs: [functions.defaults]
    type: write
    pattern: definition
    prompt: Define connect(host, port=8080, timeout=30) with two defaults
    expected_answer: "def connect(host, port=8080, timeout=30):"
    hints:
      - Multiple defaults follow same pattern
      - Required params come first
    tags: [functions, defaults]

  - slug: default-param-none
    objective: "Use None as a default parameter to avoid mutable default issues"
    title: Default Parameter None
    difficulty: 2
    concept: functions
    subconcept: defaults
    level: practice
    prereqs: [functions.defaults]
    type: write
    pattern: definition
    prompt: Define append_to(item, target=None) with None as default
    expected_answer: "def append_to(item, target=None):"
    hints:
      - None is safe default for mutables
      - Check for None inside function
    tags: [functions, defaults, mutable]

  - slug: default-param-mutable-trap
    objective: "Recognize the mutable default argument anti-pattern"
    title: Mutable Default Trap
    difficulty: 3
    concept: functions
    subconcept: defaults
    level: edge
    prereqs: [functions.defaults]
    type: write
    pattern: definition
    prompt: Define add_item(item, items=None) avoiding the mutable default trap (use None, not [])
    expected_answer: "def add_item(item, items=None):"
    hints:
      - Never use [] as default
      - Use None then create list inside
      - Mutable defaults persist between calls
    tags: [functions, defaults, mutable, antipattern]

  # --- Args-Kwargs Subconcept ---
  - slug: args-intro
    objective: "Define a function that accepts variable positional arguments with *args"
    title: Variable Args Intro
    difficulty: 2
    concept: functions
    subconcept: args-kwargs
    level: intro
    prereqs: [fn-basics]
    type: write
    pattern: definition
    prompt: Define a function sum_all that accepts any number of positional arguments
    expected_answer: "def sum_all(*args):"
    hints:
      - Use * before parameter name
      - args is a tuple inside function
    tags: [functions, args-kwargs, args]

  - slug: kwargs-intro
    objective: "Define a function that accepts variable keyword arguments with **kwargs"
    title: Variable Kwargs Intro
    difficulty: 2
    concept: functions
    subconcept: args-kwargs
    level: intro
    prereqs: [fn-basics]
    type: write
    pattern: definition
    prompt: Define a function build_config that accepts any keyword arguments
    expected_answer: "def build_config(**kwargs):"
    hints:
      - Use ** before parameter name
      - kwargs is a dict inside function
    tags: [functions, args-kwargs, kwargs]

  - slug: args-kwargs-combined
    objective: "Combine *args and **kwargs in a single function definition"
    title: Combined Args and Kwargs
    difficulty: 3
    concept: functions
    subconcept: args-kwargs
    level: practice
    prereqs: [functions.args-kwargs]
    type: write
    pattern: definition
    prompt: Define a function wrapper that accepts any positional and keyword arguments
    expected_answer: "def wrapper(*args, **kwargs):"
    hints:
      - "*args comes before **kwargs"
      - Order is required, *args, **kwargs
    tags: [functions, args-kwargs, combined]

  - slug: args-kwargs-forward
    objective: "Forward all arguments to another function using *args and **kwargs"
    title: Forward All Arguments
    difficulty: 3
    concept: functions
    subconcept: args-kwargs
    level: edge
    prereqs: [functions.args-kwargs]
    type: write
    pattern: invocation
    prompt: Call inner_func forwarding all args and kwargs from wrapper
    expected_answer: "inner_func(*args, **kwargs)"
    hints:
      - Unpack with * and ** when calling
      - Same syntax for collecting and spreading
    tags: [functions, args-kwargs, forwarding]

  # --- Fill-in Exercises ---
  - slug: def-keyword-fill
    objective: Complete the function definition keyword
    title: Def Keyword Fill-in
    difficulty: 1
    concept: functions
    subconcept: fn-basics
    level: intro
    prereqs: []
    type: fill-in
    blank_position: 0
    pattern: definition
    prompt: Fill in the keyword that defines a function
    template: "___ greet(name):"
    expected_answer: "def"
    hints:
      - Keyword that starts function definition
      - Short for "define"
    tags: [functions, def, fill-in]

  - slug: return-keyword-fill
    objective: Complete the return statement
    title: Return Fill-in
    difficulty: 1
    concept: functions
    subconcept: fn-basics
    level: intro
    prereqs: [fn-basics]
    type: fill-in
    blank_position: 0
    pattern: definition
    prompt: Fill in the keyword that returns a value from a function
    template: |
      def add(a, b):
          ___ a + b
    expected_answer: "return"
    hints:
      - Keyword to send value back to caller
      - Exits the function immediately
    tags: [functions, return, fill-in]

  - slug: lambda-keyword-fill
    objective: Complete the lambda expression
    title: Lambda Fill-in
    difficulty: 2
    concept: functions
    subconcept: lambda
    level: intro
    prereqs: [fn-basics]
    type: fill-in
    blank_position: 0
    pattern: definition
    prompt: Fill in the keyword for an anonymous function
    template: "double = ___ x: x * 2"
    expected_answer: "lambda"
    hints:
      - Keyword for anonymous functions
      - Single expression, no return keyword needed
    tags: [functions, lambda, fill-in]

  - slug: default-value-fill
    objective: Complete the default parameter syntax
    title: Default Value Fill-in
    difficulty: 2
    concept: functions
    subconcept: defaults
    level: practice
    prereqs: [fn-basics]
    type: fill-in
    blank_position: 0
    pattern: definition
    prompt: Fill in the operator that assigns a default value
    template: 'def greet(name, greeting___"Hello"):'
    expected_answer: "="
    hints:
      - Assignment operator for defaults
      - Same symbol used in regular assignment
    tags: [functions, defaults, fill-in]

  - slug: args-syntax-fill
    objective: Complete the variable arguments syntax
    title: Args Syntax Fill-in
    difficulty: 2
    concept: functions
    subconcept: args-kwargs
    level: practice
    prereqs: [fn-basics]
    type: fill-in
    blank_position: 0
    pattern: definition
    prompt: Fill in the prefix for variable positional arguments
    template: "def sum_all(___args):"
    expected_answer: "*"
    hints:
      - Single asterisk for positional args
      - Collects all remaining positional arguments
    tags: [functions, args, fill-in]

  - slug: kwargs-syntax-fill
    objective: Complete the keyword arguments syntax
    title: Kwargs Syntax Fill-in
    difficulty: 2
    concept: functions
    subconcept: args-kwargs
    level: practice
    prereqs: [functions.args-kwargs]
    type: fill-in
    blank_position: 0
    pattern: definition
    prompt: Fill in the prefix for variable keyword arguments
    template: "def config(___kwargs):"
    expected_answer: "**"
    hints:
      - Double asterisk for keyword args
      - Collects all remaining keyword arguments as a dict
    tags: [functions, kwargs, fill-in]

  # --- Predict Exercises ---
  - slug: function-return-predict
    objective: Predict function return value
    title: Return Value Predict
    difficulty: 1
    concept: functions
    subconcept: fn-basics
    level: intro
    prereqs: [fn-basics]
    type: predict
    pattern: invocation
    prompt: What does this code print?
    code: |
      def add(a, b):
          return a + b
      print(add(3, 4))
    expected_answer: "7"
    hints:
      - Function returns sum of arguments
      - add(3, 4) computes 3 + 4
    tags: [functions, return, predict]

  - slug: default-param-predict
    objective: Predict behavior with default parameters
    title: Default Param Predict
    difficulty: 2
    concept: functions
    subconcept: defaults
    level: practice
    prereqs: [functions.defaults]
    type: predict
    pattern: invocation
    prompt: What does this code print?
    code: |
      def greet(name, greeting="Hello"):
          return f"{greeting}, {name}!"
      print(greet("Alice"))
    expected_answer: "Hello, Alice!"
    hints:
      - Default value is used when not provided
      - Only name is passed, so greeting uses its default
    tags: [functions, defaults, predict]

  - slug: lambda-predict
    objective: Predict lambda expression result
    title: Lambda Predict
    difficulty: 2
    concept: functions
    subconcept: lambda
    level: practice
    prereqs: [functions.lambda]
    type: predict
    pattern: invocation
    prompt: What does this code print?
    code: |
      double = lambda x: x * 2
      print(double(5))
    expected_answer: "10"
    hints:
      - Lambda multiplies input by 2
      - double(5) evaluates 5 * 2
    tags: [functions, lambda, predict]

  - slug: scope-predict
    objective: Predict variable scope behavior
    title: Scope Predict
    difficulty: 3
    concept: functions
    subconcept: scope
    level: practice
    prereqs: [functions.scope]
    type: predict
    pattern: scope
    prompt: What does this code print?
    code: |
      x = 10
      def foo():
          x = 20
          print(x)
      foo()
      print(x)
    expected_answer: |
      20
      10
    hints:
      - Local x shadows global x inside function
      - Global x is unchanged after function returns
    tags: [functions, scope, predict]

  - slug: args-predict
    objective: Predict *args behavior
    title: Args Predict
    difficulty: 2
    concept: functions
    subconcept: args-kwargs
    level: practice
    prereqs: [functions.args-kwargs]
    type: predict
    pattern: invocation
    prompt: What does this code print?
    code: |
      def show(*args):
          print(len(args))
      show(1, 2, 3, 4)
    expected_answer: "4"
    hints:
      - args is a tuple of all positional arguments
      - 4 arguments were passed to show()
    tags: [functions, args, predict]

  - slug: mutable-default-predict
    objective: Predict mutable default argument bug
    title: Mutable Default Predict
    difficulty: 3
    concept: functions
    subconcept: defaults
    level: edge
    prereqs: [functions.defaults]
    type: predict
    pattern: gotcha
    prompt: What does this code print?
    code: |
      def add_item(item, items=[]):
          items.append(item)
          return items
      print(add_item(1))
      print(add_item(2))
    expected_answer: |
      [1]
      [1, 2]
    hints:
      - Mutable defaults are shared between calls
      - This is a common Python gotcha
    tags: [functions, mutable, gotcha, predict]

  # --- Dynamic Exercises (using generators) ---
  - slug: function-call-dynamic
    objective: "Predict the return value of a realistic function call"
    title: Dynamic Function Call
    difficulty: 2
    concept: functions
    subconcept: fn-basics
    level: practice
    prereqs: [fn-basics]
    type: predict
    pattern: invocation
    generator: function-call
    prompt: "What does {{funcName}}({{argList}}) return?"
    code: "{{code}}"
    expected_answer: "{{result}}"
    hints:
      - Trace through the function with the given arguments
      - Functions compute and return values
    tags: [functions, dynamic, predict]

  - slug: function-call-write-dynamic
    objective: "Write the correct function call syntax"
    title: Dynamic Function Call Write
    difficulty: 2
    concept: functions
    subconcept: fn-basics
    level: practice
    prereqs: [fn-basics]
    type: write
    pattern: invocation
    generator: function-call
    prompt: "Call {{funcName}} with arguments {{argList}}"
    expected_answer: "{{funcName}}({{argList}})"
    hints:
      - Function calls use parentheses
      - Pass arguments in order
    tags: [functions, call, dynamic, write]

  - slug: function-result-predict-dynamic
    objective: "Predict the computed result of a function"
    title: Dynamic Function Result
    difficulty: 2
    concept: functions
    subconcept: fn-basics
    level: practice
    prereqs: [fn-basics]
    type: predict
    pattern: invocation
    generator: function-call
    prompt: "What does this function call return?"
    code: "{{code}}"
    expected_answer: "{{result}}"
    hints:
      - Substitute the argument values
      - Perform the computation
    tags: [functions, return, dynamic, predict]

  - slug: lambda-result-dynamic
    objective: "Predict the result of calling a lambda expression"
    title: Dynamic Lambda Result
    difficulty: 2
    concept: functions
    subconcept: lambda
    level: practice
    prereqs: [functions.lambda]
    type: predict
    pattern: invocation
    generator: lambda-expr
    prompt: "What does this code print?"
    code: |
      {{opName}} = {{lambdaExpr}}
      print({{opName}}({{argList}}))
    expected_answer: "{{result}}"
    hints:
      - The lambda {{description}}
      - Substitute the arguments into the expression
    tags: [functions, lambda, dynamic, predict]
    target_construct:
      type: lambda
      feedback: "Lambdas are concise anonymous functions"

  - slug: lambda-write-dynamic
    objective: "Write a lambda expression that performs the operation"
    title: Dynamic Lambda Write
    difficulty: 2
    concept: functions
    subconcept: lambda
    level: practice
    prereqs: [functions.lambda]
    type: write
    pattern: definition
    generator: lambda-expr
    prompt: "Write a lambda that {{description}}"
    expected_answer: "{{lambdaExpr}}"
    hints:
      - "Lambda syntax: lambda params: expression"
      - "Use the parameters {{params}}"
    tags: [functions, lambda, dynamic, write]
    target_construct:
      type: lambda
      feedback: "Use lambda for simple one-expression functions"

  - slug: lambda-call-dynamic
    objective: "Call a lambda with specific arguments"
    title: Dynamic Lambda Call
    difficulty: 2
    concept: functions
    subconcept: lambda
    level: practice
    prereqs: [functions.lambda]
    type: write
    pattern: invocation
    generator: lambda-expr
    prompt: "Call the lambda {{opName}} = {{lambdaExpr}} with arguments {{argList}}"
    expected_answer: "{{opName}}({{argList}})"
    hints:
      - Call lambdas just like regular functions
      - Use parentheses with arguments inside
    tags: [functions, lambda, call, dynamic]

  # --- Default Arguments Dynamic Exercises ---
  - slug: default-args-predict-dynamic
    objective: Predict function output with default arguments
    title: Dynamic Default Args Predict
    difficulty: 2
    concept: functions
    subconcept: defaults
    level: practice
    prereqs: [functions.fn-basics]
    type: predict
    pattern: invocation
    generator: default-args
    prompt: "What does this code print?"
    code: "{{code}}"
    expected_answer: "{{result}}"
    hints:
      - "The function {{description}}"
      - "Check if default values are used"
    tags: [functions, defaults, dynamic, predict]

  - slug: default-args-call-dynamic
    objective: Call a function using its default parameters
    title: Dynamic Default Args Call
    difficulty: 2
    concept: functions
    subconcept: defaults
    level: practice
    prereqs: [functions.defaults]
    type: write
    pattern: invocation
    generator: default-args
    prompt: "Given def {{funcName}}({{params}}), call it to get the result '{{result}}'"
    expected_answer: "{{funcName}}({{callArgs}})"
    hints:
      - "Default parameters can be omitted"
      - "Explicit args override defaults"
    tags: [functions, defaults, dynamic, write]

  # --- Integrated Exercises (Premium - Combining Multiple Subconcepts) ---
  - slug: retry-decorator-integrated
    objective: Build a retry decorator combining decorators, while loops, and exception handling
    title: Retry Connection Decorator
    difficulty: 3
    concept: functions
    subconcept: decorators
    level: integrated
    prereqs: [decorators, while, try-except, args-kwargs]
    targets: [decorators, while, try-except, args-kwargs]
    type: write
    pattern: definition
    domains: [web, devops]
    prompt: |
      Create a decorator @retry that wraps a function and retries it up to 3 times
      if ConnectionError is raised. Use *args, **kwargs to pass arguments through.
    expected_answer: |
      def retry(func):
          def wrapper(*args, **kwargs):
              attempts = 0
              while attempts < 3:
                  try:
                      return func(*args, **kwargs)
                  except ConnectionError:
                      attempts += 1
              return func(*args, **kwargs)
          return wrapper
    accepted_solutions:
      - |
        def retry(func):
            def wrapper(*args, **kwargs):
                for _ in range(3):
                    try:
                        return func(*args, **kwargs)
                    except ConnectionError:
                        pass
                return func(*args, **kwargs)
            return wrapper
    hints:
      - Decorator returns a wrapper function
      - Use while or for loop for attempts
      - Catch ConnectionError inside the loop
    tags: [decorators, retry, integrated, production]

  - slug: config-loader-integrated
    objective: Build a safe config loader combining context managers, try-except, and dict handling
    title: Safe JSON Config Loader
    difficulty: 3
    concept: functions
    subconcept: fn-basics
    level: integrated
    prereqs: [context, try-except, imports-basic, dicts]
    targets: [context, try-except, imports-basic, dicts]
    type: write
    pattern: definition
    domains: [devops, web]
    prompt: |
      Write load_config(path) that safely loads a JSON file using a context manager.
      If FileNotFoundError or json.JSONDecodeError occurs, return empty dict {}.
      Assume json is already imported.
    expected_answer: |
      def load_config(path):
          try:
              with open(path) as f:
                  return json.load(f)
          except (FileNotFoundError, json.JSONDecodeError):
              return {}
    accepted_solutions:
      - |
        def load_config(path):
            try:
                with open(path, 'r') as f:
                    return json.load(f)
            except (FileNotFoundError, json.JSONDecodeError):
                return {}
    hints:
      - Use with statement for file handling
      - Catch multiple exceptions with tuple
      - Return empty dict on any error
    tags: [context-manager, json, error-handling, integrated]
  # --- Debug Exercises (Pitfall Subconcepts) ---