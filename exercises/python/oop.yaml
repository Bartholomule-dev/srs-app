# exercises/python/oop.yaml
language: python
category: oop

exercises:
  - slug: define-class
    objective: Define a basic class using the class keyword syntax
    title: Define Class
    difficulty: 2
    prompt: Write the class header for a class named `{{entity_name}}` (header only, no body)
    expected_answer: "class {{entity_name}}:"
    accepted_solutions:
      - "class {{entity_name}}:"
      - "class {{entity_name}}():"
    hints:
      - Use the `class` keyword followed by the class name
      - Class names conventionally use PascalCase
    tags: [classes, oop, intermediate]
    concept: oop
    subconcept: classes
    level: intro
    prereqs: [functions]
    type: write
    pattern: definition

  - slug: init-method
    objective: Define an __init__ constructor method with self and parameters
    title: Init Method
    difficulty: 2
    prompt: Write the `__init__` constructor header that takes `self` and `{{attr_key_1}}` (header only, no body)
    expected_answer: "def __init__(self, {{attr_key_1}}):"
    accepted_solutions:
      - "def __init__(self, {{attr_key_1}}):"
    hints:
      - Use double underscores around init
      - The `self` parameter is always first
    tags: [classes, init, intermediate]
    concept: oop
    subconcept: methods
    level: intro
    prereqs: [functions]
    type: write
    pattern: definition

  - slug: instance-attribute
    objective: Assign a value to an instance attribute using self.attribute syntax
    title: Instance Attribute
    difficulty: 2
    prompt: Inside `__init__`, assign the `{{attr_key_1}}` parameter to an instance attribute
    expected_answer: "self.{{attr_key_1}} = {{attr_key_1}}"
    accepted_solutions:
      - "self.{{attr_key_1}} = {{attr_key_1}}"
    hints:
      - Use `self.attribute = value` syntax
      - This makes the attribute accessible on the object
    tags: [classes, attributes, intermediate]
    concept: oop
    subconcept: classes
    level: intro
    prereqs: [functions]
    type: write
    pattern: construction

  - slug: instance-method
    objective: Define an instance method that takes self as the first parameter
    title: Instance Method
    difficulty: 2
    prompt: Write the method header for an instance method named `{{action_verb}}` (header only, no body)
    expected_answer: "def {{action_verb}}(self):"
    accepted_solutions:
      - "def {{action_verb}}(self):"
    hints:
      - Methods always take `self` as the first parameter
      - The `self` parameter gives access to the instance's attributes
    tags: [classes, methods, intermediate]
    concept: oop
    subconcept: methods
    level: intro
    prereqs: [functions]
    type: write
    pattern: definition

  # --- Inheritance Subconcept ---
  - slug: inheritance-basic
    objective: Create a subclass that inherits from a parent class
    title: Basic Inheritance
    difficulty: 2
    concept: oop
    subconcept: inheritance
    level: intro
    prereqs: [oop.classes]
    type: write
    pattern: definition
    prompt: Write the class header for `Special{{entity_name}}` as a subclass of `{{entity_name}}`
    expected_answer: "class Special{{entity_name}}({{entity_name}}):"
    accepted_solutions:
      - "class Special{{entity_name}}({{entity_name}}):"
      - "class Special{{entity_name}}( {{entity_name}} ):"
    hints:
      - Put the parent class in parentheses after the class name
      - The subclass will inherit all methods from `{{entity_name}}`
    tags: [oop, inheritance, beginner]

  - slug: inheritance-super-init
    objective: Call the parent class constructor using super()
    title: Super Init
    difficulty: 2
    concept: oop
    subconcept: inheritance
    level: intro
    prereqs: [oop.inheritance]
    type: write
    pattern: invocation
    prompt: Inside a subclass `__init__`, call the parent constructor with `{{attr_key_1}}`
    expected_answer: "super().__init__({{attr_key_1}})"
    accepted_solutions:
      - "super().__init__({{attr_key_1}})"
    hints:
      - Use `super()` to access the parent class
      - Call `__init__` like a regular method
    tags: [oop, inheritance, super]

  - slug: inheritance-override-method
    objective: Override a parent class method in a subclass
    title: Method Override
    difficulty: 2
    concept: oop
    subconcept: inheritance
    level: practice
    prereqs: [oop.inheritance]
    type: write
    pattern: definition
    prompt: In a subclass, override `{{action_verb}}` so it returns `"{{item_example}}"`
    expected_answer: |
      def {{action_verb}}(self):
          return "{{item_example}}"
    accepted_solutions:
      - |
        def {{action_verb}}(self):
            return "{{item_example}}"
      - |
        def {{action_verb}}(self):
            return '{{item_example}}'
    hints:
      - Define a method with the same name to override the parent
      - Return the specified value
    tags: [oop, inheritance, override]

  - slug: inheritance-super-method
    objective: Extend a parent method by calling super() within the override
    title: Extend Parent Method
    difficulty: 3
    concept: oop
    subconcept: inheritance
    level: practice
    prereqs: [oop.inheritance]
    type: write
    pattern: invocation
    prompt: Inside an overriding `{{action_verb}}`, call the parent implementation and store it in `base_result`
    expected_answer: "base_result = super().{{action_verb}}()"
    accepted_solutions:
      - "base_result = super().{{action_verb}}()"
    hints:
      - Use `super()` to access the parent's method
      - This lets you extend the parent's behavior rather than replace it
    tags: [oop, inheritance, super]

  - slug: inheritance-isinstance
    objective: Check if an object is an instance of a class or its subclasses
    title: Check Inheritance
    difficulty: 2
    concept: oop
    subconcept: inheritance
    level: practice
    prereqs: [oop.inheritance]
    type: write
    pattern: invocation
    prompt: Write an expression that returns `True` if `{{item_singular}}` is an instance of `{{entity_name}}` (including subclasses)
    expected_answer: "isinstance({{item_singular}}, {{entity_name}})"
    accepted_solutions:
      - "isinstance({{item_singular}}, {{entity_name}})"
    hints:
      - The `isinstance` function checks the inheritance chain
      - Returns `True` for instances of the class or any subclass
    tags: [oop, inheritance, isinstance]

  - slug: inheritance-issubclass
    objective: Check if a class is a subclass of another class
    title: Check Subclass
    difficulty: 2
    concept: oop
    subconcept: inheritance
    level: edge
    prereqs: [oop.inheritance]
    type: write
    pattern: invocation
    prompt: Write an expression that returns `True` if `Special{{entity_name}}` is a subclass of `{{entity_name}}`
    expected_answer: "issubclass(Special{{entity_name}}, {{entity_name}})"
    accepted_solutions:
      - "issubclass(Special{{entity_name}}, {{entity_name}})"
    hints:
      - The `issubclass` function checks the class hierarchy
      - Takes class names, not instances
    tags: [oop, inheritance, issubclass]

  # --- Classmethod Subconcept ---
  - slug: classmethod-basic
    objective: Define a class method using the @classmethod decorator
    title: Basic Classmethod
    difficulty: 2
    concept: oop
    subconcept: classmethod
    level: intro
    prereqs: [oop.methods]
    type: write
    pattern: definition
    prompt: Write the decorator and method header for a class method named `create_{{item_singular}}` (no body)
    expected_answer: |
      @classmethod
      def create_{{item_singular}}(cls):
    accepted_solutions:
      - |
        @classmethod
        def create_{{item_singular}}(cls):
      - "@classmethod\ndef create_{{item_singular}}(cls):"
    hints:
      - Use `@classmethod` decorator on the line before `def`
      - First parameter is `cls`, not `self`
    tags: [oop, classmethod, decorator]

  - slug: classmethod-cls-parameter
    objective: Use cls parameter to access class attributes
    title: Cls Parameter
    difficulty: 2
    concept: oop
    subconcept: classmethod
    level: intro
    prereqs: [oop.classmethod]
    type: write
    pattern: invocation
    prompt: Inside a `@classmethod`, return the class attribute `{{item_singular}}_count`
    expected_answer: "return cls.{{item_singular}}_count"
    accepted_solutions:
      - "return cls.{{item_singular}}_count"
    hints:
      - The `cls` parameter refers to the class itself
      - Access class attributes with `cls.attribute_name`
    tags: [oop, classmethod, cls]

  - slug: classmethod-factory
    objective: Create an alternative constructor using a classmethod
    title: Factory Method
    difficulty: 3
    concept: oop
    subconcept: classmethod
    level: practice
    prereqs: [oop.classmethod]
    type: write
    pattern: definition
    prompt: Write a `from_string` classmethod that takes `s` and returns a new instance created with `cls(s)`
    expected_answer: |
      @classmethod
      def from_string(cls, s):
          return cls(s)
    accepted_solutions:
      - |
        @classmethod
        def from_string(cls, s):
            return cls(s)
    hints:
      - Call `cls()` to create a new instance
      - The method receives the class as the first argument
    tags: [oop, classmethod, factory]

  - slug: classmethod-call
    objective: Call a classmethod on the class itself
    title: Call Classmethod
    difficulty: 2
    concept: oop
    subconcept: classmethod
    level: practice
    prereqs: [oop.classmethod]
    type: write
    pattern: invocation
    prompt: Call `from_string` on `{{entity_name}}` and store the returned instance in `obj`
    expected_answer: 'obj = {{entity_name}}.from_string("{{item_example}}")'
    accepted_solutions:
      - 'obj = {{entity_name}}.from_string("{{item_example}}")'
      - "obj = {{entity_name}}.from_string('{{item_example}}')"
    hints:
      - Call on the class, not an instance
      - Classmethods can also be called on instances, but calling on the class is clearer
    tags: [oop, classmethod, call]

  - slug: staticmethod-basic
    objective: Define a static method using the @staticmethod decorator
    title: Basic Staticmethod
    difficulty: 2
    concept: oop
    subconcept: classmethod
    level: practice
    prereqs: [oop.methods]
    type: write
    pattern: definition
    prompt: Define a `@staticmethod` named `validate_{{item_singular}}(value)` that returns `True` if `value` is truthy, otherwise `False`
    expected_answer: |
      @staticmethod
      def validate_{{item_singular}}(value):
          return bool(value)
    accepted_solutions:
      - |
        @staticmethod
        def validate_{{item_singular}}(value):
            return bool(value)
      - |
        @staticmethod
        def validate_{{item_singular}}(value):
            return True if value else False
    hints:
      - Use the `@staticmethod` decorator
      - No `self` or `cls` parameter needed
    tags: [oop, staticmethod, decorator]

  - slug: staticmethod-vs-classmethod
    objective: Choose between staticmethod and classmethod based on need for class access
    title: Static vs Class Method
    difficulty: 3
    concept: oop
    subconcept: classmethod
    level: edge
    prereqs: [oop.classmethod]
    type: write
    pattern: definition
    prompt: Define a `@staticmethod` `is_valid_{{item_singular}}(value)` that returns `False` for empty or whitespace-only strings
    expected_answer: |
      @staticmethod
      def is_valid_{{item_singular}}(value):
          return bool(value.strip())
    accepted_solutions:
      - |
        @staticmethod
        def is_valid_{{item_singular}}(value):
            return bool(value.strip())
      - |
        @staticmethod
        def is_valid_{{item_singular}}(value):
            return len(value.strip()) > 0
    hints:
      - Use `@staticmethod` when you don't need class or instance access
      - Use `.strip()` to check for whitespace-only strings
    tags: [oop, staticmethod, classmethod]

  # --- Properties Subconcept ---
  - slug: property-getter
    objective: Define a property getter using the @property decorator
    title: Property Getter
    difficulty: 2
    concept: oop
    subconcept: properties
    level: intro
    prereqs: [oop.methods]
    type: write
    pattern: definition
    prompt: Define a `@property` named `{{item_singular}}_display` that returns `self._{{item_singular}}_display`
    expected_answer: |
      @property
      def {{item_singular}}_display(self):
          return self._{{item_singular}}_display
    accepted_solutions:
      - |
        @property
        def {{item_singular}}_display(self):
            return self._{{item_singular}}_display
    hints:
      - Use the `@property` decorator
      - The method becomes accessible as an attribute (no parentheses needed)
    tags: [oop, property, getter]

  - slug: property-return
    objective: Return a computed value from a property getter
    title: Property Return Value
    difficulty: 2
    concept: oop
    subconcept: properties
    level: intro
    prereqs: [oop.properties]
    type: write
    pattern: construction
    prompt: In a `@property` getter, return `{{attr_key_1}}` and `{{attr_key_2}}` separated by a space
    expected_answer: 'return f"{self.{{attr_key_1}}} {self.{{attr_key_2}}}"'
    accepted_solutions:
      - 'return f"{self.{{attr_key_1}}} {self.{{attr_key_2}}}"'
      - "return f'{self.{{attr_key_1}}} {self.{{attr_key_2}}}'"
      - "return self.{{attr_key_1}} + ' ' + self.{{attr_key_2}}"
    hints:
      - Combine the two instance attributes with `self.`
      - Use an f-string or string concatenation with a space
    tags: [oop, property, computed]

  - slug: property-setter
    objective: Define a property setter using the @name.setter decorator
    title: Property Setter
    difficulty: 2
    concept: oop
    subconcept: properties
    level: practice
    prereqs: [oop.properties]
    type: write
    pattern: definition
    prompt: Define the setter header for `{{item_singular}}_display` and assign `value` to `self._{{item_singular}}_display`
    expected_answer: |
      @{{item_singular}}_display.setter
      def {{item_singular}}_display(self, value):
          self._{{item_singular}}_display = value
    accepted_solutions:
      - |
        @{{item_singular}}_display.setter
        def {{item_singular}}_display(self, value):
            self._{{item_singular}}_display = value
    hints:
      - Use `@property_name.setter` decorator
      - Use the same method name as the getter
    tags: [oop, property, setter]

  - slug: property-setter-validation
    objective: Add validation logic inside a property setter
    title: Property Validation
    difficulty: 3
    concept: oop
    subconcept: properties
    level: practice
    prereqs: [oop.properties]
    type: write
    pattern: handling
    prompt: In a setter, raise `ValueError` if `value` is negative
    expected_answer: |
      if value < 0:
          raise ValueError("value cannot be negative")
    accepted_solutions:
      - |
        if value < 0:
            raise ValueError("value cannot be negative")
      - |
        if value < 0:
            raise ValueError('value cannot be negative')
      - |
        if value < 0:
            raise ValueError("Cannot be negative")
    hints:
      - Check the condition before setting the value
      - Raise `ValueError` with a descriptive message
    tags: [oop, property, validation]

  - slug: property-deleter
    objective: Define a property deleter using the @name.deleter decorator
    title: Property Deleter
    difficulty: 3
    concept: oop
    subconcept: properties
    level: edge
    prereqs: [oop.properties]
    type: write
    pattern: definition
    prompt: Define a deleter for the `{{item_singular}}` property that deletes `self._{{item_singular}}`
    expected_answer: |
      @{{item_singular}}.deleter
      def {{item_singular}}(self):
          del self._{{item_singular}}
    accepted_solutions:
      - |
        @{{item_singular}}.deleter
        def {{item_singular}}(self):
            del self._{{item_singular}}
    hints:
      - Use `@property_name.deleter` decorator
      - Called when `del obj.property_name` is used
    tags: [oop, property, deleter]

  - slug: property-readonly
    objective: Create a read-only property by defining only a getter
    title: Read-Only Property
    difficulty: 2
    concept: oop
    subconcept: properties
    level: edge
    prereqs: [oop.properties]
    type: write
    pattern: definition
    prompt: Define a read-only `@property` named `{{attr_key_1}}` that returns `self._{{attr_key_1}}`
    expected_answer: |
      @property
      def {{attr_key_1}}(self):
          return self._{{attr_key_1}}
    accepted_solutions:
      - |
        @property
        def {{attr_key_1}}(self):
            return self._{{attr_key_1}}
    hints:
      - Only define a getter, no setter
      - Use underscore prefix for the private attribute
    tags: [oop, property, readonly]

  # --- Fill-in Exercises ---
  - slug: class-keyword-fill
    objective: Complete the class definition keyword
    title: Class Keyword Fill-in
    difficulty: 1
    concept: oop
    subconcept: classes
    level: intro
    prereqs: []
    type: fill-in
    blank_position: 0
    pattern: definition
    prompt: Fill in the Python keyword used to define a class
    template: "___ {{entity_name}}:"
    expected_answer: "class"
    hints:
      - The keyword that starts a class definition
      - Similar to how `def` starts a function
    tags: [oop, class, fill-in]

  - slug: init-self-fill
    objective: Complete the __init__ first parameter
    title: Init Self Fill-in
    difficulty: 1
    concept: oop
    subconcept: methods
    level: intro
    prereqs: [oop.classes]
    type: fill-in
    blank_position: 0
    pattern: definition
    prompt: Fill in the conventional first parameter name for an instance method
    template: "def __init__(___, {{attr_key_1}}):"
    expected_answer: "self"
    hints:
      - Always the first parameter in instance methods
      - Refers to the object being created
    tags: [oop, init, fill-in]

  - slug: super-fill
    objective: Complete the super() call
    title: Super Fill-in
    difficulty: 2
    concept: oop
    subconcept: inheritance
    level: practice
    prereqs: [oop.inheritance]
    type: fill-in
    blank_position: 0
    pattern: invocation
    prompt: Fill in the keyword used to call a parent method
    template: "___().__init__({{attr_key_1}})"
    expected_answer: "super"
    hints:
      - Built-in function to access the parent class
      - Returns a proxy object for calling parent methods
    tags: [oop, super, fill-in]

  # --- Predict Exercises ---
  - slug: instance-attribute-predict
    objective: Predict instance attribute access
    title: Instance Attribute Predict
    difficulty: 2
    concept: oop
    subconcept: classes
    level: intro
    prereqs: [oop.classes]
    type: predict
    pattern: invocation
    generator: oop-instance
    prompt: What does this code print?
    code: |
      class Person:
          def __init__(self, name):
              self.name = name
      p = Person("{{personName}}")
      print(p.name)
    expected_answer: "{{personName}}"
    hints:
      - The `self.name` attribute stores the passed value
      - Accessing `p.name` retrieves what was set in `__init__`
    tags: [oop, attribute, predict, dynamic]

  - slug: method-call-predict
    objective: Predict method return value
    title: Method Call Predict
    difficulty: 2
    concept: oop
    subconcept: methods
    level: practice
    prereqs: [oop.methods]
    type: predict
    pattern: invocation
    prompt: What does this code print? (Enter each line of output on a separate line)
    code: |
      class {{entity_name}}Counter:
          def __init__(self):
              self.{{item_singular}}_count = 0
          def {{action_verb}}(self):
              self.{{item_singular}}_count += 1
              return self.{{item_singular}}_count
      c = {{entity_name}}Counter()
      print(c.{{action_verb}}())
      print(c.{{action_verb}}())
    expected_answer: |
      1
      2
    accepted_solutions:
      - |
        1
        2
      - "1\n2"
    hints:
      - Each `{{action_verb}}` call increments and returns the count
      - The object remembers its state between method calls
    tags: [oop, method, predict]

  - slug: inheritance-predict
    objective: Predict inherited method behavior
    title: Inheritance Predict
    difficulty: 2
    concept: oop
    subconcept: inheritance
    level: practice
    prereqs: [oop.inheritance]
    type: predict
    pattern: invocation
    prompt: The subclass overrides a method. What does this code print?
    code: |
      class {{entity_name}}:
          def {{action_verb}}(self):
              return "{{status_var}}"
      class Special{{entity_name}}({{entity_name}}):
          def {{action_verb}}(self):
              return "{{item_example}}"
      obj = Special{{entity_name}}()
      print(obj.{{action_verb}}())
    expected_answer: "{{item_example}}"
    hints:
      - The child method overrides the parent
      - Python uses the most specific (child) implementation
    tags: [oop, inheritance, predict]

  # --- Dynamic OOP Exercises ---
  - slug: method-call-dynamic
    objective: Predict the result of calling a method on an object
    title: Dynamic Method Call
    difficulty: 2
    concept: oop
    subconcept: methods
    level: practice
    prereqs: [oop.methods]
    type: predict
    pattern: invocation
    generator: class-method
    prompt: "What does this code print? (Focus on what the method returns)"
    code: "{{code}}"
    expected_answer: "{{result}}"
    hints:
      - "The `{{method}}` method modifies or returns based on `{{attribute}}`"
      - "Context: {{context}}"
    tags: [oop, methods, dynamic, predict]

  - slug: instance-method-write-dynamic
    objective: Write a method call on an instance
    title: Dynamic Instance Method Write
    difficulty: 2
    concept: oop
    subconcept: methods
    level: practice
    prereqs: [oop.methods]
    type: write
    pattern: invocation
    generator: class-method
    prompt: "Given `obj` is an instance of `{{className}}`, write the code to call `{{method}}`"
    expected_answer: "obj.{{method}}()"
    accepted_solutions:
      - "obj.{{method}}()"
    hints:
      - "Call methods using dot notation: `obj.method()`"
      - "Don't forget the parentheses at the end"
    tags: [oop, methods, dynamic, write]

  # --- Inheritance Dynamic Exercises ---
  - slug: inheritance-predict-dynamic
    objective: Predict the output when calling a method on a child class
    title: Dynamic Inheritance Method
    difficulty: 3
    concept: oop
    subconcept: inheritance
    level: practice
    prereqs: [oop.inheritance]
    type: predict
    pattern: invocation
    generator: inheritance-method
    prompt: "What does this code print? (Focus on method overriding)"
    code: "{{code}}"
    expected_answer: "{{result}}"
    hints:
      - "{{description}}"
      - "Check if `{{childClass}}` overrides `{{method}}`"
    tags: [oop, inheritance, dynamic, predict]

  - slug: inheritance-override-dynamic
    objective: Identify which class provides the method implementation
    title: Dynamic Method Resolution
    difficulty: 3
    concept: oop
    subconcept: inheritance
    level: practice
    prereqs: [oop.inheritance]
    type: predict
    pattern: invocation
    generator: inheritance-method
    prompt: "When calling `{{method}}()` on `obj`, which class provides the implementation: `{{parentClass}}` or `{{childClass}}`?"
    code: "{{code}}"
    expected_answer: "{{implementingClass}}"
    accepted_solutions:
      - "{{implementingClass}}"
      - "{{implementingClass}}."
    hints:
      - "Check if the child class overrides the method"
      - "If no override, the parent's method is used"
    tags: [oop, inheritance, dynamic, predict]

  # --- Integrated Exercises (Premium - Combining Multiple Subconcepts) ---
