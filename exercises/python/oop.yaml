# exercises/python/oop.yaml
language: python
category: oop

exercises:
  - slug: define-class
    objective: Define a basic class using the class keyword syntax
    title: Define Class
    difficulty: 2
    prompt: Define a class called Person
    expected_answer: "class Person:"
    hints:
      - Use the class keyword
      - Class names conventionally use PascalCase
    tags: [classes, oop, intermediate]
    concept: oop
    subconcept: classes
    level: intro
    prereqs: [functions]
    type: write
    pattern: definition

  - slug: init-method
    objective: Define an __init__ constructor method with self and parameters
    title: Init Method
    difficulty: 2
    prompt: Define __init__ that takes self and name parameter
    expected_answer: "def __init__(self, name):"
    hints:
      - Use double underscores
      - self is always first parameter
    tags: [classes, init, intermediate]
    concept: oop
    subconcept: methods
    level: intro
    prereqs: [functions]
    type: write
    pattern: definition

  - slug: instance-attribute
    objective: Assign a value to an instance attribute using self.attribute syntax
    title: Instance Attribute
    difficulty: 2
    prompt: Set self.name to the name parameter inside __init__
    expected_answer: self.name = name
    hints:
      - Use self.attribute = value
      - This makes the attribute accessible on the object
    tags: [classes, attributes, intermediate]
    concept: oop
    subconcept: classes
    level: intro
    prereqs: [functions]
    type: write
    pattern: construction

  - slug: instance-method
    objective: Define an instance method that takes self as the first parameter
    title: Instance Method
    difficulty: 2
    prompt: Define a method called greet that takes self
    expected_answer: "def greet(self):"
    hints:
      - Methods always take self as first parameter
      - self gives access to the instance's attributes
    tags: [classes, methods, intermediate]
    concept: oop
    subconcept: methods
    level: intro
    prereqs: [functions]
    type: write
    pattern: definition

  # --- Inheritance Subconcept ---
  - slug: inheritance-basic
    objective: Create a subclass that inherits from a parent class
    title: Basic Inheritance
    difficulty: 2
    concept: oop
    subconcept: inheritance
    level: intro
    prereqs: [oop.classes]
    type: write
    pattern: definition
    prompt: Define class Student that inherits from Person
    expected_answer: "class Student(Person):"
    hints:
      - Put parent class in parentheses
      - Student will inherit all methods from Person
    tags: [oop, inheritance, beginner]

  - slug: inheritance-super-init
    objective: Call the parent class constructor using super()
    title: Super Init
    difficulty: 2
    concept: oop
    subconcept: inheritance
    level: intro
    prereqs: [oop.inheritance]
    type: write
    pattern: invocation
    prompt: Call the parent class __init__ with name parameter using super()
    expected_answer: "super().__init__(name)"
    hints:
      - Use super() to access parent
      - Call __init__ like a method
    tags: [oop, inheritance, super]

  - slug: inheritance-override-method
    objective: Override a parent class method in a subclass
    title: Method Override
    difficulty: 2
    concept: oop
    subconcept: inheritance
    level: practice
    prereqs: [oop.inheritance]
    type: write
    pattern: definition
    prompt: Define a greet method in a subclass that overrides the parent's greet
    expected_answer: "def greet(self):"
    hints:
      - Same method name overrides parent
      - The subclass version is called instead
    tags: [oop, inheritance, override]

  - slug: inheritance-super-method
    objective: Extend a parent method by calling super() within the override
    title: Extend Parent Method
    difficulty: 3
    concept: oop
    subconcept: inheritance
    level: practice
    prereqs: [oop.inheritance]
    type: write
    pattern: invocation
    prompt: Call the parent's greet method from within an overriding greet method
    expected_answer: "super().greet()"
    hints:
      - Use super() to access parent method
      - This lets you extend the parent's behavior rather than replace it
    tags: [oop, inheritance, super]

  - slug: inheritance-isinstance
    objective: Check if an object is an instance of a class or its subclasses
    title: Check Inheritance
    difficulty: 2
    concept: oop
    subconcept: inheritance
    level: practice
    prereqs: [oop.inheritance]
    type: write
    pattern: invocation
    prompt: Check if student is an instance of Person (including subclasses)
    expected_answer: "isinstance(student, Person)"
    hints:
      - isinstance checks inheritance chain
      - Returns True if object is Person or any subclass of Person
    tags: [oop, inheritance, isinstance]

  - slug: inheritance-issubclass
    objective: Check if a class is a subclass of another class
    title: Check Subclass
    difficulty: 2
    concept: oop
    subconcept: inheritance
    level: edge
    prereqs: [oop.inheritance]
    type: write
    pattern: invocation
    prompt: Check if Student is a subclass of Person
    expected_answer: "issubclass(Student, Person)"
    hints:
      - issubclass checks class hierarchy
      - Takes class names, not instances
    tags: [oop, inheritance, issubclass]

  # --- Classmethod Subconcept ---
  - slug: classmethod-basic
    objective: Define a class method using the @classmethod decorator
    title: Basic Classmethod
    difficulty: 2
    concept: oop
    subconcept: classmethod
    level: intro
    prereqs: [oop.methods]
    type: write
    pattern: definition
    prompt: Write the decorator and signature for a class method called create (just the header, no body)
    expected_answer: |
      @classmethod
      def create(cls):
    accepted_solutions:
      - |
        @classmethod
        def create(cls):
      - "@classmethod\ndef create(cls):"
    hints:
      - Use @classmethod decorator on the line before def
      - First parameter is cls, not self
    tags: [oop, classmethod, decorator]

  - slug: classmethod-cls-parameter
    objective: Use cls parameter to access class attributes
    title: Cls Parameter
    difficulty: 2
    concept: oop
    subconcept: classmethod
    level: intro
    prereqs: [oop.classmethod]
    type: write
    pattern: invocation
    prompt: Return cls.count from within a classmethod
    expected_answer: "return cls.count"
    hints:
      - cls refers to the class itself
      - Access class attributes with cls.attribute_name
    tags: [oop, classmethod, cls]

  - slug: classmethod-factory
    objective: Create an alternative constructor using a classmethod
    title: Factory Method
    difficulty: 3
    concept: oop
    subconcept: classmethod
    level: practice
    prereqs: [oop.classmethod]
    type: write
    pattern: definition
    prompt: Define a classmethod from_string that creates an instance from a string
    expected_answer: |
      @classmethod
      def from_string(cls, s):
          return cls(s)
    hints:
      - Call cls() to create new instance
      - Parse the string and pass to constructor
    tags: [oop, classmethod, factory]

  - slug: classmethod-call
    objective: Call a classmethod on the class itself
    title: Call Classmethod
    difficulty: 2
    concept: oop
    subconcept: classmethod
    level: practice
    prereqs: [oop.classmethod]
    type: write
    pattern: invocation
    prompt: Call the from_string classmethod on Person class with "Alice"
    expected_answer: Person.from_string("Alice")
    accepted_solutions:
      - 'Person.from_string("Alice")'
      - "Person.from_string('Alice')"
    hints:
      - Call on the class, not an instance
      - Classmethods can also be called on instances, but calling on the class is clearer
    tags: [oop, classmethod, call]

  - slug: staticmethod-basic
    objective: Define a static method using the @staticmethod decorator
    title: Basic Staticmethod
    difficulty: 2
    concept: oop
    subconcept: classmethod
    level: practice
    prereqs: [oop.methods]
    type: write
    pattern: definition
    prompt: Define a static method called validate using @staticmethod decorator
    expected_answer: |
      @staticmethod
      def validate(value):
    hints:
      - Use @staticmethod decorator
      - No self or cls parameter
    tags: [oop, staticmethod, decorator]

  - slug: staticmethod-vs-classmethod
    objective: Choose between staticmethod and classmethod based on need for class access
    title: Static vs Class Method
    difficulty: 3
    concept: oop
    subconcept: classmethod
    level: edge
    prereqs: [oop.classmethod]
    type: write
    pattern: definition
    prompt: Define a utility method is_valid that doesn't need self or cls
    expected_answer: |
      @staticmethod
      def is_valid(value):
    hints:
      - staticmethod when you don't need class access
      - classmethod when you need cls
    tags: [oop, staticmethod, classmethod]

  # --- Properties Subconcept ---
  - slug: property-getter
    objective: Define a property getter using the @property decorator
    title: Property Getter
    difficulty: 2
    concept: oop
    subconcept: properties
    level: intro
    prereqs: [oop.methods]
    type: write
    pattern: definition
    prompt: Define a property called full_name using @property decorator
    expected_answer: |
      @property
      def full_name(self):
    hints:
      - Use @property decorator
      - Method becomes readable as attribute
    tags: [oop, property, getter]

  - slug: property-return
    objective: Return a computed value from a property getter
    title: Property Return Value
    difficulty: 2
    concept: oop
    subconcept: properties
    level: intro
    prereqs: [oop.properties]
    type: write
    pattern: construction
    prompt: Return first_name and last_name joined with a space from a property
    expected_answer: return f"{self.first_name} {self.last_name}"
    accepted_solutions:
      - 'return f"{self.first_name} {self.last_name}"'
      - "return f'{self.first_name} {self.last_name}'"
      - "return self.first_name + ' ' + self.last_name"
    hints:
      - Combine the two attributes
      - Use f-string or string concatenation with a space
    tags: [oop, property, computed]

  - slug: property-setter
    objective: Define a property setter using the @name.setter decorator
    title: Property Setter
    difficulty: 2
    concept: oop
    subconcept: properties
    level: practice
    prereqs: [oop.properties]
    type: write
    pattern: definition
    prompt: Define a setter for the full_name property
    expected_answer: |
      @full_name.setter
      def full_name(self, value):
    hints:
      - Use @property_name.setter
      - Same method name as getter
    tags: [oop, property, setter]

  - slug: property-setter-validation
    objective: Add validation logic inside a property setter
    title: Property Validation
    difficulty: 3
    concept: oop
    subconcept: properties
    level: practice
    prereqs: [oop.properties]
    type: write
    pattern: handling
    prompt: In a setter, raise ValueError if value is negative
    expected_answer: |
      if value < 0:
          raise ValueError("Value cannot be negative")
    accepted_solutions:
      - |
        if value < 0:
            raise ValueError("Value cannot be negative")
      - |
        if value < 0:
            raise ValueError('Value cannot be negative')
    hints:
      - Check condition before setting
      - Raise appropriate exception
    tags: [oop, property, validation]

  - slug: property-deleter
    objective: Define a property deleter using the @name.deleter decorator
    title: Property Deleter
    difficulty: 3
    concept: oop
    subconcept: properties
    level: edge
    prereqs: [oop.properties]
    type: write
    pattern: definition
    prompt: Define a deleter for the name property
    expected_answer: |
      @name.deleter
      def name(self):
    hints:
      - Use @property_name.deleter
      - Called when del obj.name is used
    tags: [oop, property, deleter]

  - slug: property-readonly
    objective: Create a read-only property by defining only a getter
    title: Read-Only Property
    difficulty: 2
    concept: oop
    subconcept: properties
    level: edge
    prereqs: [oop.properties]
    type: write
    pattern: definition
    prompt: Define a read-only property called age that returns self._age
    expected_answer: |
      @property
      def age(self):
          return self._age
    hints:
      - Only define getter, no setter
      - Use underscore prefix for private attribute
    tags: [oop, property, readonly]

  # --- Fill-in Exercises ---
  - slug: class-keyword-fill
    objective: Complete the class definition keyword
    title: Class Keyword Fill-in
    difficulty: 1
    concept: oop
    subconcept: classes
    level: intro
    prereqs: []
    type: fill-in
    blank_position: 0
    pattern: definition
    prompt: Fill in the keyword that defines a class
    template: "___ Person:"
    expected_answer: "class"
    hints:
      - Keyword that starts class definition
      - Similar to how 'def' starts a function
    tags: [oop, class, fill-in]

  - slug: init-self-fill
    objective: Complete the __init__ first parameter
    title: Init Self Fill-in
    difficulty: 1
    concept: oop
    subconcept: methods
    level: intro
    prereqs: [oop.classes]
    type: fill-in
    blank_position: 0
    pattern: definition
    prompt: Fill in the first parameter that refers to the instance
    template: "def __init__(___, name):"
    expected_answer: "self"
    hints:
      - Always the first parameter in instance methods
      - Refers to the object being created
    tags: [oop, init, fill-in]

  - slug: super-fill
    objective: Complete the super() call
    title: Super Fill-in
    difficulty: 2
    concept: oop
    subconcept: inheritance
    level: practice
    prereqs: [oop.inheritance]
    type: fill-in
    blank_position: 0
    pattern: invocation
    prompt: Fill in the function that accesses the parent class
    template: "___().__init__(name)"
    expected_answer: "super"
    hints:
      - Built-in to access parent class
      - Returns a proxy object for accessing parent methods
    tags: [oop, super, fill-in]

  # --- Predict Exercises ---
  - slug: instance-attribute-predict
    objective: Predict instance attribute access
    title: Instance Attribute Predict
    difficulty: 2
    concept: oop
    subconcept: classes
    level: intro
    prereqs: [oop.classes]
    type: predict
    pattern: invocation
    generator: oop-instance
    prompt: What does this code print?
    code: |
      class Person:
          def __init__(self, name):
              self.name = name
      p = Person("{{personName}}")
      print(p.name)
    expected_answer: "{{personName}}"
    hints:
      - self.name stores the passed value
      - Accessing p.name retrieves what was set in __init__
    tags: [oop, attribute, predict, dynamic]

  - slug: method-call-predict
    objective: Predict method return value
    title: Method Call Predict
    difficulty: 2
    concept: oop
    subconcept: methods
    level: practice
    prereqs: [oop.methods]
    type: predict
    pattern: invocation
    prompt: What does this code print?
    code: |
      class Counter:
          def __init__(self):
              self.count = 0
          def increment(self):
              self.count += 1
              return self.count
      c = Counter()
      print(c.increment())
      print(c.increment())
    expected_answer: |
      1
      2
    hints:
      - Each call increments and returns count
      - The object remembers its state between method calls
    tags: [oop, method, predict]

  - slug: inheritance-predict
    objective: Predict inherited method behavior
    title: Inheritance Predict
    difficulty: 2
    concept: oop
    subconcept: inheritance
    level: practice
    prereqs: [oop.inheritance]
    type: predict
    pattern: invocation
    prompt: What does this code print?
    code: |
      class Animal:
          def speak(self):
              return "sound"
      class Dog(Animal):
          def speak(self):
              return "bark"
      d = Dog()
      print(d.speak())
    expected_answer: "bark"
    hints:
      - Child method overrides parent
      - Python uses the most specific (child) implementation
    tags: [oop, inheritance, predict]

  # --- Dynamic OOP Exercises ---
  - slug: method-call-dynamic
    objective: Predict the result of calling a method on an object
    title: Dynamic Method Call
    difficulty: 2
    concept: oop
    subconcept: methods
    level: practice
    prereqs: [oop.methods]
    type: predict
    pattern: invocation
    generator: class-method
    prompt: "What does this code print?"
    code: "{{code}}"
    expected_answer: "{{result}}"
    hints:
      - "The {{method}} method modifies or returns based on {{attribute}}"
      - "Context: {{context}}"
    tags: [oop, methods, dynamic, predict]

  - slug: instance-method-write-dynamic
    objective: Write a method call on an instance
    title: Dynamic Instance Method Write
    difficulty: 2
    concept: oop
    subconcept: methods
    level: practice
    prereqs: [oop.methods]
    type: write
    pattern: invocation
    generator: class-method
    prompt: "Given obj is a {{className}} instance, call its {{method}} method"
    expected_answer: "{{methodCall}}"
    hints:
      - "Call methods using dot notation: obj.method()"
      - "Don't forget the parentheses at the end"
    tags: [oop, methods, dynamic, write]

  # --- Inheritance Dynamic Exercises ---
  - slug: inheritance-predict-dynamic
    objective: Predict the output when calling a method on a child class
    title: Dynamic Inheritance Method
    difficulty: 3
    concept: oop
    subconcept: inheritance
    level: practice
    prereqs: [oop.inheritance]
    type: predict
    pattern: invocation
    generator: inheritance-method
    prompt: "What does this code print?"
    code: "{{code}}"
    expected_answer: "{{result}}"
    hints:
      - "{{description}}"
      - "Check if {{childClass}} overrides {{method}}"
    tags: [oop, inheritance, dynamic, predict]

  - slug: inheritance-override-dynamic
    objective: Identify which class provides the method implementation
    title: Dynamic Method Resolution
    difficulty: 3
    concept: oop
    subconcept: inheritance
    level: practice
    prereqs: [oop.inheritance]
    type: predict
    pattern: invocation
    generator: inheritance-method
    prompt: "When calling {{method}}() on a {{callOn}} instance, which class provides the implementation? ({{parentClass}} or {{childClass}})"
    code: "{{code}}"
    expected_answer: "{{callOn}}"
    hints:
      - "Check if the child class overrides the method"
      - "If no override, the parent's method is used"
    tags: [oop, inheritance, dynamic, predict]

  # --- Integrated Exercises (Premium - Combining Multiple Subconcepts) ---
  - slug: api-response-model-integrated
    objective: Build an API response dataclass with safe mutable defaults
    title: API Response Model
    difficulty: 3
    concept: oop
    subconcept: dataclasses
    level: integrated
    prereqs: [dataclasses, typehints, mutability, defaults]
    targets: [dataclasses, typehints, mutability, defaults]
    type: write
    pattern: definition
    domains: [web]
    prompt: |
      Define a @dataclass named APIResponse with:
      - status: int defaulting to 200
      - errors: list[str] using field(default_factory=list) to avoid shared state
      Import field from dataclasses.
    expected_answer: |
      @dataclass
      class APIResponse:
          status: int = 200
          errors: list[str] = field(default_factory=list)
    accepted_solutions:
      - |
        @dataclass
        class APIResponse:
            status: int = 200
            errors: list[str] = field(default_factory=list)
    hints:
      - Use @dataclass decorator
      - Mutable defaults need field(default_factory=...)
      - This prevents shared state bugs
    tags: [dataclass, api, mutable-default, integrated]

  - slug: health-check-dataclass-integrated
    objective: Create a health check dataclass with f-string log method
    title: Health Check with Logging
    difficulty: 3
    concept: oop
    subconcept: dataclasses
    level: integrated
    prereqs: [dataclasses, fstrings, methods, defaults]
    targets: [dataclasses, fstrings, methods, defaults]
    type: write
    pattern: definition
    prompt: |
      Define a @dataclass HealthCheck with:
      - name: str
      - status: str = "ok"
      - duration_ms: int = 0
      Add method to_log_line() returning f"{self.name}:{self.status} ({self.duration_ms}ms)"
    expected_answer: |
      @dataclass
      class HealthCheck:
          name: str
          status: str = "ok"
          duration_ms: int = 0

          def to_log_line(self) -> str:
              return f"{self.name}:{self.status} ({self.duration_ms}ms)"
    hints:
      - Methods work normally in dataclasses
      - Use f-string for formatted output
      - Access fields with self.fieldname
    tags: [dataclass, logging, fstring, integrated]

  # --- Debug Exercises (Pitfall Subconcepts) ---