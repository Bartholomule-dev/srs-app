# exercises/python/strings.yaml
language: python
category: strings

exercises:
  # Static string-indexing removed - covered by string-index-dynamic
  # Static string-slicing removed - covered by string-slicing-dynamic

  - slug: string-slicing-dynamic
    objective: Use slice notation to extract a substring from a string
    title: Dynamic String Slicing
    difficulty: 2
    prompt: Write an expression that slices `{{item_singular}}` from index `{{start}}` up to (but not including) `{{end}}`
    expected_answer: "{{item_singular}}[{{start}}:{{end}}]"
    hints:
      - Use slice notation `[start:end]`
      - End index is exclusive (stops before it)
    tags: [strings, slicing, intermediate, dynamic]
    concept: strings
    subconcept: slicing
    level: practice
    prereqs: [indexing]
    type: write
    pattern: indexing
    generator: slice-bounds
    target_construct:
      type: slice
      feedback: "Try using slice notation {{item_singular}}[start:end] for cleaner extraction"
    accepted_solutions:
      - "{{item_singular}}[{{start}}:{{end}}]"
      - "{{item_singular}}[ {{start}} : {{end}} ]"
      - "{{item_singular}}[{{start}}: {{end}}]"

  - slug: string-index-dynamic
    objective: Use bracket notation to access a specific character by index
    title: Dynamic Character Index
    difficulty: 1
    prompt: Write an expression that gets the character at index `{{idx}}` from `{{item_singular}}`
    expected_answer: "{{item_singular}}[{{idx}}]"
    hints:
      - Use square bracket indexing
      - "Remember: indices start at 0"
    tags: [strings, indexing, dynamic]
    concept: strings
    subconcept: indexing
    level: intro
    prereqs: [basics]
    type: write
    pattern: indexing
    generator: index-values
    accepted_solutions:
      - "{{item_singular}}[{{idx}}]"
      - "{{item_singular}}[ {{idx}} ]"

  - slug: string-slice-step-dynamic
    objective: Use slice with step parameter to skip characters
    title: Dynamic Slice with Step
    difficulty: 2
    prompt: Write a slice that takes every other character from `{{item_singular}}`, starting at index `{{idx}}`
    expected_answer: "{{item_singular}}[{{idx}}::2]"
    hints:
      - Use slice notation `[start:end:step]`
      - Step of 2 means every other character
    tags: [strings, slicing, step, dynamic]
    concept: strings
    subconcept: slicing
    level: practice
    prereqs: [slicing]
    type: write
    pattern: indexing
    generator: index-values
    target_construct:
      type: slice
      feedback: "Try using slice with step {{item_singular}}[start::step] for cleaner iteration"
    accepted_solutions:
      - "{{item_singular}}[{{idx}}::2]"

  - slug: fstring-variable-dynamic
    objective: Construct a log message using f-string interpolation
    title: Dynamic Log Message
    difficulty: 2
    prompt: Write an f-string that prints `Processing` followed by the value of `name`
    expected_answer: 'f"Processing {name}"'
    hints:
      - Start string with `f` prefix
      - Use curly braces for variable interpolation
    tags: [strings, fstrings, logging, dynamic]
    concept: strings
    subconcept: fstrings
    level: practice
    prereqs: [basics]
    type: write
    pattern: construction
    target_construct:
      type: fstrings
      feedback: "Try using an f-string f\"...{var}...\" for cleaner formatting"
    accepted_solutions:
      - 'f"Processing {name}"'
      - "f'Processing {name}'"

  - slug: string-slice-from-end-dynamic
    objective: Use slice notation to get last N characters
    title: Dynamic Slice from End
    difficulty: 2
    prompt: Write a slice that returns the last `{{end}}` characters of `{{item_singular}}`
    expected_answer: "{{item_singular}}[-{{end}}:]"
    hints:
      - Negative indices count from the end
      - Omitting the end index goes to the end
    tags: [strings, slicing, negative, dynamic]
    concept: strings
    subconcept: slicing
    level: practice
    prereqs: [indexing]
    type: write
    pattern: indexing
    generator: slice-bounds
    target_construct:
      type: slice
      feedback: "Try using negative slice {{item_singular}}[-n:] to get last n characters"
    accepted_solutions:
      - "{{item_singular}}[-{{end}}:]"

  - slug: string-upper
    objective: "Apply the upper() method to convert string case"
    title: String Uppercase
    difficulty: 1
    prompt: Write an expression that converts `{{item_singular}}` to uppercase
    expected_answer: "{{item_singular}}.upper()"
    accepted_solutions:
      - "{{item_singular}}.upper()"
      - "{{item_singular}}.upper( )"
    hints:
      - Use the `.upper()` method on a string
      - Returns a new string (strings are immutable)
    tags: [strings, methods, beginner]
    concept: strings
    subconcept: string-methods
    level: intro
    prereqs: [basics]
    type: write
    pattern: mutation

  - slug: f-string-basic
    objective: "Construct a formatted message using f-string formatting"
    title: F-String Format
    difficulty: 2
    prompt: 'Write an f-string that produces: "{{entity_name}}: <value>" (use the variable `item`)'
    expected_answer: 'f"{{entity_name}}: {item}"'
    accepted_solutions:
      - 'f"{{entity_name}}: {item}"'
      - "f'{{entity_name}}: {item}'"
    hints:
      - Start string with `f` prefix before the quote
      - Put variable names in curly braces `{variable}`
    tags: [strings, fstrings, intermediate]
    concept: strings
    subconcept: fstrings
    level: practice
    prereqs: [basics]
    type: write
    pattern: construction

  - slug: string-split
    objective: "Use the split() method to convert a string into a list"
    title: String Split
    difficulty: 2
    prompt: Write an expression that splits `{{item_singular}}` by commas into a list of strings
    expected_answer: '{{item_singular}}.split(",")'
    accepted_solutions:
      - '{{item_singular}}.split(",")'
      - "{{item_singular}}.split(',')"
    hints:
      - Use the `.split()` method
      - Pass the delimiter as an argument
    tags: [strings, methods, intermediate]
    concept: strings
    subconcept: string-methods
    level: practice
    prereqs: [basics]
    type: write
    pattern: conversion

  # --- Additional Basics Subconcept ---
  - slug: string-concatenate
    objective: "Use the + operator to join strings together"
    title: String Concatenation
    difficulty: 1
    concept: strings
    subconcept: basics
    level: intro
    prereqs: [foundations]
    type: write
    pattern: construction
    prompt: Write a single expression that concatenates `{{attr_key_1}}` and `{{attr_key_2}}`
    expected_answer: "{{attr_key_1}} + {{attr_key_2}}"
    accepted_solutions:
      - "{{attr_key_1}} + {{attr_key_2}}"
      - "{{attr_key_1}}+{{attr_key_2}}"
    hints:
      - Use the + operator between two string variables
      - Creates a new string from both inputs
    tags: [strings, concatenation, beginner]

  - slug: string-repeat
    objective: "Use the * operator to repeat a string multiple times"
    title: String Repetition
    difficulty: 1
    concept: strings
    subconcept: basics
    level: intro
    prereqs: [foundations]
    type: write
    pattern: construction
    prompt: Write an expression that repeats `{{item_singular}}` three times
    expected_answer: "{{item_singular}} * 3"
    accepted_solutions:
      - "{{item_singular}} * 3"
      - "3 * {{item_singular}}"
    hints:
      - Use the * operator with a number
      - "Order doesn't matter: `{{item_singular}} * 3` or `3 * {{item_singular}}`"
    tags: [strings, repeat, beginner]

  - slug: string-length
    objective: "Use the len() function to determine string size"
    title: String Length
    difficulty: 1
    concept: strings
    subconcept: basics
    level: intro
    prereqs: [foundations]
    type: write
    pattern: query
    prompt: Write an expression that gets the character count of `{{item_singular}}`
    expected_answer: "len({{item_singular}})"
    accepted_solutions:
      - "len({{item_singular}})"
      - "len( {{item_singular}} )"
    hints:
      - Use the `len()` function on a string
      - "`len()` works on any sequence type (strings, lists, etc.)"
    tags: [strings, length, beginner]

  # --- Additional Indexing Subconcept ---
  - slug: string-negative-index
    objective: "Use negative indices to access characters from the end of a string"
    title: Negative Indexing
    difficulty: 1
    concept: strings
    subconcept: indexing
    level: intro
    prereqs: [basics]
    type: write
    pattern: indexing
    prompt: Write an expression that gets the last character of `{{item_singular}}` using negative indexing
    expected_answer: "{{item_singular}}[-1]"
    accepted_solutions:
      - "{{item_singular}}[-1]"
      - "{{item_singular}}[ -1 ]"
    hints:
      - Negative indices count from the end
      - "-1 is always the last character"
    tags: [strings, indexing, negative]

  - slug: string-second-last
    objective: "Apply negative indexing to access positions relative to string end"
    title: Second to Last
    difficulty: 2
    concept: strings
    subconcept: indexing
    level: practice
    prereqs: [indexing]
    type: write
    pattern: indexing
    prompt: Write an expression that gets the second-to-last character of `{{item_singular}}`
    expected_answer: "{{item_singular}}[-2]"
    accepted_solutions:
      - "{{item_singular}}[-2]"
      - "{{item_singular}}[ -2 ]"
    hints:
      - Use negative indexing
      - "-2 is second from the end"
    tags: [strings, indexing, negative]

  # --- Additional Slicing Subconcept ---
  - slug: string-slice-start
    objective: "Use slice notation with an omitted start index to extract from beginning"
    title: Slice from Start
    difficulty: 1
    concept: strings
    subconcept: slicing
    level: intro
    prereqs: [indexing]
    type: write
    pattern: indexing
    prompt: Write an expression that returns the first 5 characters of `{{item_singular}}`
    expected_answer: "{{item_singular}}[:5]"
    accepted_solutions:
      - "{{item_singular}}[:5]"
      - "{{item_singular}}[0:5]"
    hints:
      - Omitting start defaults to 0
      - End index is exclusive (stops before it)
    tags: [strings, slicing, beginner]

  - slug: string-slice-end
    objective: "Use slice notation with an omitted end index to extract to the end"
    title: Slice to End
    difficulty: 1
    concept: strings
    subconcept: slicing
    level: intro
    prereqs: [indexing]
    type: write
    pattern: indexing
    prompt: Write an expression that slices `{{item_singular}}` from index 3 to the end
    expected_answer: "{{item_singular}}[3:]"
    accepted_solutions:
      - "{{item_singular}}[3:]"
      - "{{item_singular}}[ 3 : ]"
    hints:
      - Omitting end goes to the last character
      - "`[3:]` means from index 3 onward"
    tags: [strings, slicing, beginner]

  - slug: string-reverse
    objective: "Use slice step parameter to reverse a string"
    title: Reverse String
    difficulty: 2
    concept: strings
    subconcept: slicing
    level: practice
    prereqs: [slicing]
    type: write
    pattern: indexing
    prompt: Write an expression that reverses `{{item_singular}}` using slicing
    expected_answer: "{{item_singular}}[::-1]"
    accepted_solutions:
      - "{{item_singular}}[::-1]"
      - "{{item_singular}}[ : : -1 ]"
    hints:
      - Use step value of -1
      - "`[::-1]` is the Pythonic way to reverse"
    tags: [strings, slicing, reverse]

  - slug: string-every-other
    objective: "Use slice step parameter to extract alternating characters"
    title: Every Other Character
    difficulty: 2
    concept: strings
    subconcept: slicing
    level: practice
    prereqs: [slicing]
    type: write
    pattern: indexing
    prompt: Write a slice that takes every other character from `{{item_singular}}`, starting at index 0
    expected_answer: "{{item_singular}}[::2]"
    accepted_solutions:
      - "{{item_singular}}[::2]"
      - "{{item_singular}}[ : : 2 ]"
    hints:
      - Use step value of 2
      - Omit start and end to use defaults
    tags: [strings, slicing, step]

  # --- Additional Methods Subconcept ---
  - slug: string-lower
    objective: "Apply the lower() method to convert string case"
    title: String Lowercase
    difficulty: 1
    concept: strings
    subconcept: string-methods
    level: intro
    prereqs: [basics]
    type: write
    pattern: mutation
    prompt: Write an expression that converts `{{item_singular}}` to lowercase
    expected_answer: "{{item_singular}}.lower()"
    accepted_solutions:
      - "{{item_singular}}.lower()"
      - "{{item_singular}}.lower( )"
    hints:
      - Use the `.lower()` method on a string
      - Returns a new string (strings are immutable)
    tags: [strings, methods, beginner]

  - slug: string-strip
    objective: "Use the strip() method to remove whitespace from string boundaries"
    title: String Strip
    difficulty: 1
    concept: strings
    subconcept: string-methods
    level: intro
    prereqs: [basics]
    type: write
    pattern: mutation
    prompt: Write an expression that removes leading and trailing whitespace from `{{item_singular}}`
    expected_answer: "{{item_singular}}.strip()"
    accepted_solutions:
      - "{{item_singular}}.strip()"
      - "{{item_singular}}.strip( )"
    hints:
      - Use the `.strip()` method
      - "`.lstrip()` and `.rstrip()` remove from one side only"
    tags: [strings, methods, whitespace]

  - slug: string-replace
    objective: "Use the replace() method to substitute text within a string"
    title: String Replace
    difficulty: 2
    concept: strings
    subconcept: string-methods
    level: practice
    prereqs: [string-methods]
    type: write
    pattern: mutation
    prompt: Write an expression that replaces all occurrences of `"{{attr_key_1}}"` with `"{{attr_key_2}}"` in `{{item_singular}}`
    expected_answer: '{{item_singular}}.replace("{{attr_key_1}}", "{{attr_key_2}}")'
    accepted_solutions:
      - '{{item_singular}}.replace("{{attr_key_1}}", "{{attr_key_2}}")'
      - "{{item_singular}}.replace('{{attr_key_1}}', '{{attr_key_2}}')"
    hints:
      - Use the `.replace()` method
      - Takes old and new strings as arguments
    tags: [strings, methods, replace]

  - slug: string-join
    objective: "Use the join() method to combine list elements into a string"
    title: String Join
    difficulty: 2
    concept: strings
    subconcept: string-methods
    level: practice
    prereqs: [string-methods]
    type: write
    pattern: construction
    prompt: Write an expression that joins `{{list_name}}` using a comma as the separator
    expected_answer: '",".join({{list_name}})'
    accepted_solutions:
      - '",".join({{list_name}})'
      - "','.join({{list_name}})"
    hints:
      - Call `.join()` on the separator string
      - Pass the list as the argument
    tags: [strings, methods, join]

  - slug: string-find
    objective: "Use the find() method to locate substring positions"
    title: String Find
    difficulty: 2
    concept: strings
    subconcept: string-methods
    level: practice
    prereqs: [string-methods]
    type: write
    pattern: query
    prompt: Write an expression that returns the index of `"{{item_example}}"` inside `{{item_singular}}` (or -1 if not found)
    expected_answer: '{{item_singular}}.find("{{item_example}}")'
    accepted_solutions:
      - '{{item_singular}}.find("{{item_example}}")'
      - "{{item_singular}}.find('{{item_example}}')"
    hints:
      - Use the `.find()` method
      - Returns -1 if the substring is not found
    tags: [strings, methods, find]

  - slug: string-startswith
    objective: "Use the startswith() method to check string prefixes"
    title: String Starts With
    difficulty: 2
    concept: strings
    subconcept: string-methods
    level: practice
    prereqs: [string-methods]
    type: write
    pattern: query
    prompt: Write an expression that checks whether `{{item_singular}}` starts with `"{{item_example}}"`
    expected_answer: '{{item_singular}}.startswith("{{item_example}}")'
    accepted_solutions:
      - '{{item_singular}}.startswith("{{item_example}}")'
      - "{{item_singular}}.startswith('{{item_example}}')"
    hints:
      - Use the `.startswith()` method
      - Returns `True` or `False`
    tags: [strings, methods, check]

  # --- Additional F-Strings Subconcept ---
  - slug: fstring-expression
    objective: "Embed arithmetic expressions inside f-string placeholders"
    title: F-String Expression
    difficulty: 2
    concept: strings
    subconcept: fstrings
    level: practice
    prereqs: [fstrings]
    type: write
    pattern: construction
    prompt: Write an f-string that prints the sum of `a + b` like "Total {{item_plural}} is <sum>"
    expected_answer: 'f"Total {{item_plural}} is {a + b}"'
    accepted_solutions:
      - 'f"Total {{item_plural}} is {a + b}"'
      - "f'Total {{item_plural}} is {a + b}'"
      - 'f"Total {{item_plural}} is {a+b}"'
      - "f'Total {{item_plural}} is {a+b}'"
    hints:
      - Put the expression inside `{}`
      - The expression is evaluated before string interpolation
    tags: [strings, fstrings, expression]

  - slug: fstring-format-number
    objective: "Apply f-string format specifiers to control decimal precision"
    title: F-String Format Number
    difficulty: 2
    concept: strings
    subconcept: fstrings
    level: edge
    prereqs: [fstrings]
    type: write
    pattern: construction
    prompt: Write an f-string expression that formats `price` to exactly 2 decimal places
    expected_answer: 'f"{price:.2f}"'
    accepted_solutions:
      - 'f"{price:.2f}"'
      - "f'{price:.2f}'"
    hints:
      - Use `:format` after the variable name
      - "`.2f` means 2 decimal places"
    tags: [strings, fstrings, formatting]

  - slug: fstring-padding
    objective: "Apply f-string format specifiers for width and padding"
    title: F-String Padding
    difficulty: 2
    concept: strings
    subconcept: fstrings
    level: edge
    prereqs: [fstrings]
    type: write
    pattern: construction
    prompt: Write an f-string expression that formats `item_id` as 5 digits with leading zeros
    expected_answer: 'f"{item_id:05}"'
    accepted_solutions:
      - 'f"{item_id:05}"'
      - "f'{item_id:05}'"
    hints:
      - "`0` before width means zero-pad"
      - "`05` = 5 characters wide with leading zeros"
    tags: [strings, fstrings, padding]

  # --- Fill-in Exercises ---

  - slug: string-len-fill
    title: String Length
    type: fill-in
    difficulty: 1
    concept: strings
    subconcept: basics
    level: intro
    prereqs: [variables]
    pattern: invocation
    objective: Use len() to get string length
    prompt: "Fill in the function name: `___({{item_singular}}_name)`"
    template: "{{item_singular}}_length = ___({{item_singular}}_name)"
    blank_position: 0
    expected_answer: "len"
    accepted_solutions: ["len"]
    hints:
      - Which built-in function returns the length?
      - Works on strings, lists, and other sequences
    tags: [strings, len]

  - slug: string-concat-fill
    title: String Concatenation
    type: fill-in
    difficulty: 1
    concept: strings
    subconcept: basics
    level: intro
    prereqs: [variables]
    pattern: construction
    objective: Concatenate strings
    prompt: "Fill in the missing operator: `{{attr_key_1}} ___ {{attr_key_2}}`"
    template: "full_{{item_singular}} = {{attr_key_1}} ___ {{attr_key_2}}"
    blank_position: 0
    expected_answer: "+"
    accepted_solutions: ["+"]
    hints:
      - Use the addition operator to join strings
      - This is called string concatenation
    tags: [strings, concatenation]

  - slug: string-index-first-fill
    title: First Character
    type: fill-in
    difficulty: 1
    concept: strings
    subconcept: indexing
    level: intro
    prereqs: [basics]
    pattern: indexing
    objective: Access first character
    prompt: "Fill in the index for the first character: `{{item_singular}}_name[___]`"
    template: "first_char = {{item_singular}}_name[___]"
    blank_position: 0
    expected_answer: "0"
    accepted_solutions: ["0"]
    hints:
      - Python uses zero-based indexing
      - The first element is always at index 0
    tags: [strings, indexing]

  - slug: string-index-last-fill
    title: Last Character
    type: fill-in
    difficulty: 2
    concept: strings
    subconcept: indexing
    level: practice
    prereqs: [basics]
    pattern: indexing
    objective: Access last character with negative index
    prompt: "Fill in the index for the last character (use negative indexing): `{{item_singular}}_name[___]`"
    template: "last_char = {{item_singular}}_name[___]"
    blank_position: 0
    expected_answer: "-1"
    accepted_solutions: ["-1"]
    hints:
      - Negative indices count from the end
      - "-1 is always the last element"
    tags: [strings, indexing]

  - slug: string-slice-start-fill
    title: Slice from Start
    type: fill-in
    difficulty: 2
    concept: strings
    subconcept: slicing
    level: intro
    prereqs: [indexing]
    pattern: indexing
    objective: Slice first N characters
    prompt: "Fill in the slice to get the first 3 characters: `{{item_singular}}_name[___]`"
    template: "prefix = {{item_singular}}_name[___]"
    blank_position: 0
    expected_answer: ":3"
    accepted_solutions: [":3", "0:3"]
    hints:
      - Omitting start defaults to 0
      - End index is exclusive (stops before it)
    tags: [strings, slicing]

  - slug: string-slice-end-fill
    title: Slice from End
    type: fill-in
    difficulty: 2
    concept: strings
    subconcept: slicing
    level: practice
    prereqs: [indexing]
    pattern: indexing
    objective: Slice last N characters
    prompt: "Fill in the slice to get the last 3 characters: `{{item_singular}}_name[___]`"
    template: "suffix = {{item_singular}}_name[___]"
    blank_position: 0
    expected_answer: "-3:"
    accepted_solutions: ["-3:"]
    hints:
      - Negative indices work in slices too
      - Omitting end goes to the last character
    tags: [strings, slicing]

  - slug: string-upper-fill
    title: Uppercase Method
    type: fill-in
    difficulty: 1
    concept: strings
    subconcept: string-methods
    level: intro
    prereqs: [basics]
    pattern: invocation
    objective: Convert to uppercase
    prompt: "Fill in the method name (no parentheses): `{{item_singular}}_name.___()`"
    template: "loud_{{item_singular}} = {{item_singular}}_name.___()"
    blank_position: 0
    expected_answer: "upper"
    accepted_solutions: ["upper"]
    hints:
      - Which string method converts to uppercase?
      - "`lower()` does the opposite"
    tags: [strings, methods]

  - slug: string-strip-fill
    title: Strip Whitespace
    type: fill-in
    difficulty: 2
    concept: strings
    subconcept: string-methods
    level: practice
    prereqs: [basics]
    pattern: invocation
    objective: Remove surrounding whitespace
    prompt: "Fill in the method name (no parentheses): `{{item_singular}}_input.___()`"
    template: "clean_{{item_singular}} = {{item_singular}}_input.___()"
    blank_position: 0
    expected_answer: "strip"
    accepted_solutions: ["strip"]
    hints:
      - This method removes whitespace from both ends
      - Commonly used when processing user input
    tags: [strings, methods]

  - slug: fstring-basic-fill
    title: F-String Variable
    type: fill-in
    difficulty: 1
    concept: strings
    subconcept: fstrings
    level: intro
    prereqs: [basics]
    pattern: construction
    objective: Use f-string for variable interpolation
    prompt: 'Given `{{item_singular}}_name = "{{item_example}}"`, fill in the variable name to insert into: `f"{___}"`'
    template: "greeting = f\"Hello, {___}!\""
    blank_position: 0
    expected_answer: "{{item_singular}}_name"
    hints:
      - Put the variable name inside the curly braces
      - The variable's value will replace the placeholder
    tags: [strings, fstrings]

  - slug: fstring-expression-fill
    title: F-String Expression
    type: fill-in
    difficulty: 2
    concept: strings
    subconcept: fstrings
    level: practice
    prereqs: [basics]
    pattern: construction
    objective: Use expression in fstrings
    prompt: "Fill in the operator: `{count ___ 2}`"
    template: "result = f\"Double {{item_plural}} is {count ___ 2}\""
    blank_position: 0
    expected_answer: "*"
    accepted_solutions: ["*"]
    hints:
      - F-strings can contain expressions
      - Which operator multiplies two numbers?
    tags: [strings, fstrings]

  # --- Predict-output Exercises ---

  - slug: string-predict-len
    title: String Length
    type: predict
    grading_strategy: execution
    difficulty: 1
    concept: strings
    subconcept: basics
    level: intro
    prereqs: [variables]
    pattern: invocation
    objective: Predict len() result for a given string
    prompt: What does this code print?
    code: |
      user_token = "admin"
      print(len(user_token))
    expected_answer: "5"
    hints:
      - "`len()` counts all characters in the string"
      - 'The word "admin" has exactly 5 letters'
    tags: [strings, len]

  - slug: string-predict-concat
    title: String Concatenation
    type: predict
    grading_strategy: execution
    difficulty: 2
    concept: strings
    subconcept: basics
    level: practice
    prereqs: [variables]
    pattern: construction
    objective: Predict concatenation result
    prompt: What does this code print?
    code: |
      {{attr_key_1}} = "{{entity_name}}"
      {{attr_key_2}} = "{{item_example}}"
      print({{attr_key_1}} + " " + {{attr_key_2}})
    expected_answer: "{{entity_name}} {{item_example}}"
    hints:
      - "`+` joins strings exactly as they are"
      - 'The middle `" "` adds a space between them'
    tags: [strings, concatenation]

  - slug: string-predict-index
    title: String Index
    type: predict
    grading_strategy: execution
    difficulty: 1
    concept: strings
    subconcept: indexing
    level: intro
    prereqs: [basics]
    pattern: indexing
    objective: Predict character at a specific index position
    prompt: What does this code print?
    code: |
      {{item_singular}}_name = "python"
      print({{item_singular}}_name[2])
    expected_answer: "t"
    hints:
      - "Count from 0: p=0, y=1, t=2, h=3, o=4, n=5"
      - Index 2 is the third character
    tags: [strings, indexing]

  - slug: string-predict-negative
    title: Negative Index
    type: predict
    grading_strategy: execution
    difficulty: 2
    concept: strings
    subconcept: indexing
    level: practice
    prereqs: [basics]
    pattern: indexing
    objective: Predict result of negative indexing
    prompt: What does this code print?
    code: |
      module_name = "system"
      print(module_name[-2])
    expected_answer: "e"
    hints:
      - "-1 is last (m), -2 is second to last (e)"
      - "In 'system': s-y-s-t-e-m where e is at -2"
    tags: [strings, indexing]

  - slug: string-predict-slice
    title: String Slice
    type: predict
    grading_strategy: execution
    difficulty: 2
    concept: strings
    subconcept: slicing
    level: intro
    prereqs: [indexing]
    pattern: indexing
    objective: Predict basic slice result
    prompt: What does this code print?
    code: |
      module_name = "system"
      print(module_name[1:4])
    expected_answer: "yst"
    hints:
      - Slice includes start index, excludes end index
      - "Index 1 is 'y', goes up to but not including index 4 ('e')"
    tags: [strings, slicing]

  - slug: string-predict-reverse
    title: String Reverse
    type: predict
    grading_strategy: execution
    difficulty: 2
    concept: strings
    subconcept: slicing
    level: practice
    prereqs: [indexing]
    pattern: indexing
    objective: Predict result of reverse slice
    prompt: What does this code print?
    code: |
      code_segment = "test"
      print(code_segment[::-1])
    expected_answer: "tset"
    hints:
      - Step of -1 reverses the string
      - Each character is read from end to start
    tags: [strings, slicing]

  - slug: string-predict-upper
    title: Uppercase Result
    type: predict
    grading_strategy: execution
    difficulty: 1
    concept: strings
    subconcept: string-methods
    level: intro
    prereqs: [basics]
    pattern: invocation
    objective: Predict result of upper() method
    prompt: What does this code print?
    code: |
      user_status = "active"
      print(user_status.upper())
    expected_answer: "ACTIVE"
    hints:
      - "`.upper()` converts all letters to uppercase"
      - Numbers and symbols remain unchanged
    tags: [strings, methods]

  - slug: string-predict-replace
    title: Replace Result
    type: predict
    grading_strategy: execution
    difficulty: 2
    concept: strings
    subconcept: string-methods
    level: practice
    prereqs: [basics]
    pattern: invocation
    objective: Predict result of replace() method
    prompt: What does this code print?
    code: |
      {{item_singular}}_data = "hello world"
      print({{item_singular}}_data.replace("o", "0"))
    expected_answer: "hell0 w0rld"
    hints:
      - "`.replace()` changes ALL occurrences of the target"
      - "Count the 'o's - there are 2 of them"
    tags: [strings, methods]

  - slug: fstring-predict-basic
    title: F-String Output
    type: predict
    grading_strategy: execution
    difficulty: 1
    concept: strings
    subconcept: fstrings
    level: intro
    prereqs: [basics]
    pattern: construction
    objective: Predict f-string output
    prompt: What does this code print?
    code: |
      name = "{{item_example}}"
      count = 30
      print(f"{name} is {count}")
    expected_answer: "{{item_example}} is 30"
    hints:
      - Variables in `{}` are replaced with their values
      - Numbers are automatically converted to strings
    tags: [strings, fstrings]

  - slug: fstring-predict-expr
    title: F-String Expression
    type: predict
    grading_strategy: execution
    difficulty: 2
    concept: strings
    subconcept: fstrings
    level: practice
    prereqs: [basics]
    pattern: construction
    objective: Predict f-string with expression
    prompt: What does this code print?
    code: |
      count = 5
      print(f"Double {{item_plural}} is {count * 2}")
    expected_answer: "Double {{item_plural}} is 10"
    hints:
      - Expressions in `{}` are evaluated first
      - "5 * 2 = 10, which gets inserted into the string"
    tags: [strings, fstrings]

  - slug: string-method-dynamic
    objective: Predict the result of a string method call
    title: Dynamic String Method
    difficulty: 1
    concept: strings
    subconcept: string-methods
    level: intro
    prereqs: [basics]
    type: predict
    grading_strategy: execution
    pattern: invocation
    generator: string-ops
    prompt: 'What does "{{original}}".{{method}}() return?'
    code: |
      s = "{{original}}"
      print(s.{{method}}())
    expected_answer: "{{result}}"
    hints:
      - Apply the string method mentally
      - Think about what {{method}}() does to each character
    tags: [strings, methods, dynamic]

  # --- Premium F-String Exercises (using string-format generator) ---
  - slug: fstring-greeting-dynamic
    objective: Predict the output of an f-string with name and age
    title: Dynamic F-String Greeting
    difficulty: 2
    concept: strings
    subconcept: fstrings
    level: practice
    prereqs: [fstrings]
    type: predict
    grading_strategy: execution
    pattern: construction
    generator: string-format
    prompt: "What does this code print?"
    code: "{{code}}"
    expected_answer: "{{result}}"
    hints:
      - Variables in curly braces get substituted
      - The f prefix enables string interpolation
    tags: [strings, fstrings, dynamic]
    target_construct:
      type: fstrings
      feedback: "F-strings make string formatting cleaner and more readable"

  - slug: fstring-write-dynamic
    objective: Write an f-string that produces the expected output
    title: Dynamic F-String Write
    difficulty: 2
    concept: strings
    subconcept: fstrings
    level: practice
    prereqs: [fstrings]
    type: write
    pattern: construction
    generator: string-format
    prompt: "Given variables from the code, write an f-string that produces: {{result}}"
    expected_answer: "{{fstring}}"
    accepted_solutions:
      - "{{fstring}}"
      - '{{fstring}}'
    hints:
      - Use f before the string quote
      - Put variable names in curly braces
    tags: [strings, fstrings, dynamic, write]
    target_construct:
      type: fstrings
      feedback: "Try using f-strings for cleaner formatting"

  # --- Advanced String Slicing (using string-slice generator) ---
  - slug: string-slice-advanced-dynamic
    objective: Predict the result of an advanced string slice operation
    title: Dynamic Advanced String Slice
    difficulty: 2
    concept: strings
    subconcept: slicing
    level: practice
    prereqs: [slicing]
    type: predict
    grading_strategy: execution
    pattern: slicing
    generator: string-slice
    prompt: "What does this code print?"
    code: "{{code}}"
    expected_answer: "{{result}}"
    hints:
      - "This is {{description}}"
      - Remember that slice notation is [start:end:step]
    tags: [strings, slicing, dynamic]
    target_construct:
      type: slice
      feedback: "String slicing is powerful for extracting substrings"

  - slug: string-reverse-dynamic
    objective: Write code to reverse a string variable using slicing
    title: Dynamic String Reverse
    difficulty: 2
    concept: strings
    subconcept: slicing
    level: edge
    prereqs: [slicing]
    type: write
    pattern: slicing
    generator: string-slice
    prompt: "Given s = '{{word}}', reverse the string using slice notation on variable s"
    expected_answer: "s[::-1]"
    accepted_solutions:
      - "s[::-1]"
      - "s[ : : -1 ]"
      - "s[: :-1]"
    hints:
      - Use step of -1 to reverse
      - The pattern is [::-1]
    tags: [strings, slicing, reverse, dynamic]
    target_construct:
      type: slice
      feedback: "[::-1] is the Pythonic way to reverse a string"

  # --- Integrated Exercises (Multi-Concept) ---
  - slug: string-split-filter
    objective: Split a string and filter the resulting list by a condition
    title: Split and Filter
    difficulty: 3
    concept: strings
    subconcept: string-methods
    level: edge
    prereqs: [string-methods, lists, list-comp]
    type: write
    pattern: transformation
    prompt: |
      Split `{{item_singular}}_text` by comma, then return a list of only the non-empty parts.
      Use `.split()` and a list comprehension.
    expected_answer: '[s for s in {{item_singular}}_text.split(",") if s]'
    accepted_solutions:
      - '[s for s in {{item_singular}}_text.split(",") if s]'
      - "[s for s in {{item_singular}}_text.split(',') if s]"
      - '[part for part in {{item_singular}}_text.split(",") if part]'
      - "[part for part in {{item_singular}}_text.split(',') if part]"
      - '[s.strip() for s in {{item_singular}}_text.split(",") if s.strip()]'
    hints:
      - "`.split(',')` returns a list of strings"
      - "Empty strings are falsy, so `if s` filters them out"
      - "Optionally use `.strip()` to also remove whitespace"
    tags: [strings, split, lists, comprehensions]

  - slug: fstring-from-dict
    objective: Format a string using values from a dictionary
    title: F-String from Dict
    difficulty: 3
    concept: strings
    subconcept: fstrings
    level: edge
    prereqs: [fstrings, dicts]
    type: write
    pattern: construction
    prompt: |
      Given `user = {"name": ..., "status": ...}`, write an f-string that prints:
      `User: <name> - <status>` by indexing the dict inside the f-string.
    expected_answer: 'f"User: {user[\"name\"]} - {user[\"status\"]}"'
    accepted_solutions:
      - 'f"User: {user[\"name\"]} - {user[\"status\"]}"'
      - "f'User: {user[\"name\"]} - {user[\"status\"]}'"
      - 'f"User: {user[''name'']} - {user[''status'']}"'
    hints:
      - "Access dict values with `dict[\"key\"]` inside f-string braces"
      - "Prefer single quotes inside: `dict['key']`"
    tags: [strings, fstrings, dicts]

  - slug: string-join-transformed
    objective: Transform list items and join them into a single string
    title: Transform and Join
    difficulty: 3
    concept: strings
    subconcept: string-methods
    level: edge
    prereqs: [string-methods, lists, list-comp]
    type: write
    pattern: transformation
    prompt: |
      Write one expression that uppercases each string in `{{list_name}}` and joins them with `" | "`.
      Use a generator expression inside `.join()`.
    expected_answer: '" | ".join(s.upper() for s in {{list_name}})'
    accepted_solutions:
      - '" | ".join(s.upper() for s in {{list_name}})'
      - "' | '.join(s.upper() for s in {{list_name}})"
      - '" | ".join(item.upper() for item in {{list_name}})'
      - "' | '.join(item.upper() for item in {{list_name}})"
      - '" | ".join([s.upper() for s in {{list_name}}])'
    hints:
      - "Call `.join()` on the separator string"
      - "Use a generator expression to transform each item"
      - "A list comprehension also works but generator is more memory-efficient"
    tags: [strings, join, lists, comprehensions]

  # --- Debug Exercises (Pitfall Subconcepts) ---