# exercises/python/loops.yaml
language: python
category: loops

exercises:
  # --- For Loop Subconcept ---
  - slug: for-loop-list
    objective: "Use a for loop to iterate over items in a list"
    title: For Loop List
    difficulty: 1
    concept: loops
    subconcept: for
    level: intro
    prereqs: [lists]
    type: write
    pattern: iteration
    prompt: Iterate over {{list_name}} and print each {{item_singular}}
    expected_answer: |
      for {{item_singular}} in {{list_name}}:
          print({{item_singular}})
    accepted_solutions:
      - |
        for {{item_singular}} in {{list_name}}:
            print({{item_singular}})
      - |
        for item in {{list_name}}:
            print(item)
      - |
        for x in {{list_name}}:
            print(x)
    hints:
      - Use for x in list syntax
      - Variable name should describe what you're iterating
    tags: [loops, lists, for]

  - slug: for-loop-string
    objective: "Iterate over characters in a string"
    title: For Loop String
    difficulty: 1
    concept: loops
    subconcept: for
    level: intro
    prereqs: [for]
    type: write
    pattern: iteration
    prompt: Iterate over characters in a string called {{item_singular}}_name and print each character
    expected_answer: |
      for char in {{item_singular}}_name:
          print(char)
    accepted_solutions:
      - |
        for char in {{item_singular}}_name:
            print(char)
      - |
        for c in {{item_singular}}_name:
            print(c)
      - |
        for letter in {{item_singular}}_name:
            print(letter)
      - |
        for x in {{item_singular}}_name:
            print(x)
    hints:
      - Strings are iterable
      - Each iteration gives one character
    tags: [loops, strings, for]

  # --- While Loop Subconcept ---
  - slug: while-keyword
    objective: Write the while keyword that starts a conditional loop
    title: While Keyword
    difficulty: 1
    concept: loops
    subconcept: while
    level: intro
    prereqs: [if-else]
    type: write
    pattern: iteration
    prompt: Write just the keyword that starts a condition-based loop (not for)
    expected_answer: "while"
    accepted_solutions:
      - "while"
      - while
    hints:
      - This keyword repeats code as long as condition is True
      - Use when you don't know how many iterations needed
    tags: [loops, while, keyword]

  - slug: while-header-intro
    objective: Write a complete while loop header with a simple condition
    title: While Loop Header
    difficulty: 1
    concept: loops
    subconcept: while
    level: intro
    prereqs: [if-else]
    type: write
    pattern: iteration
    prompt: Write a while loop that runs while is_{{action_verb}}ing is True
    expected_answer: "while is_{{action_verb}}ing:"
    accepted_solutions:
      - "while is_{{action_verb}}ing:"
      - "while is_{{action_verb}}ing == True:"
    hints:
      - While keyword followed by condition, then colon
      - Boolean variables don't need == True
    tags: [loops, while, header]

  - slug: while-counter-intro
    objective: Write a while loop header that checks a counter variable
    title: While Counter Loop
    difficulty: 1
    concept: loops
    subconcept: while
    level: intro
    prereqs: [if-else]
    type: write
    pattern: iteration
    prompt: Write a while loop header that runs while {{item_singular}}_count is less than max_{{item_plural}}
    expected_answer: "while {{item_singular}}_count < max_{{item_plural}}:"
    accepted_solutions:
      - "while {{item_singular}}_count < max_{{item_plural}}:"
    hints:
      - Use the less-than operator
      - End with a colon
    tags: [loops, while, counter]

  - slug: while-loop
    objective: "Write a while loop with a conditional expression"
    title: While Loop
    difficulty: 1
    concept: loops
    subconcept: while
    level: intro
    prereqs: [foundations, for]
    type: write
    pattern: iteration
    prompt: Write just the while loop header that runs while count < 5
    expected_answer: "while count < 5:"
    accepted_solutions:
      - "while count < 5:"
    hints:
      - Use the while keyword followed by the condition
      - End with a colon (just like if statements)
    tags: [loops, while, conditions]

  # --- iteration Subconcept Intro Exercises ---
  - slug: enumerate-keyword
    objective: Identify the function that provides index with each element
    title: Enumerate Function
    difficulty: 1
    concept: loops
    subconcept: iteration
    level: intro
    prereqs: [for]
    type: write
    pattern: iteration
    prompt: What built-in function gives you both index and value when looping?
    expected_answer: "enumerate"
    accepted_solutions:
      - "enumerate"
      - enumerate
    hints:
      - This function counts elements while iterating
      - Starts with 'e', relates to counting
    tags: [loops, enumerate, intro]

  - slug: enumerate-basic
    objective: Use enumerate to loop with index and value
    title: Basic Enumerate Loop
    difficulty: 1
    concept: loops
    subconcept: iteration
    level: intro
    prereqs: [for]
    type: write
    pattern: iteration
    prompt: Write a for loop using enumerate over {{list_name}}
    expected_answer: "for i, {{item_singular}} in enumerate({{list_name}}):"
    accepted_solutions:
      - "for i, {{item_singular}} in enumerate({{list_name}}):"
      - "for idx, {{item_singular}} in enumerate({{list_name}}):"
      - "for index, {{item_singular}} in enumerate({{list_name}}):"
    hints:
      - enumerate() wraps the iterable
      - Unpack into two variables for index and value
    tags: [loops, enumerate, basic]

  - slug: range-intro
    objective: Use range() to generate a sequence of numbers
    title: Range Function Intro
    difficulty: 1
    concept: loops
    subconcept: iteration
    level: intro
    prereqs: [for]
    type: write
    pattern: iteration
    prompt: Generate numbers 0 through 4 using range
    expected_answer: "range(5)"
    accepted_solutions:
      - "range(5)"
      - range(5)
    hints:
      - range(n) gives 0 to n-1
      - For 0-4, you need 5 numbers total
    tags: [loops, range, intro]

  - slug: enumerate-loop
    objective: "Apply enumerate() to access both index and value in a loop"
    title: Enumerate Loop
    difficulty: 2
    concept: loops
    subconcept: iteration
    level: practice
    prereqs: [foundations, for]
    type: write
    pattern: iteration
    prompt: Loop over {{list_name}} with both index and {{item_singular}} using enumerate
    expected_answer: "for i, {{item_singular}} in enumerate({{list_name}}):"
    accepted_solutions:
      - "for i, {{item_singular}} in enumerate({{list_name}}):"
      - "for idx, {{item_singular}} in enumerate({{list_name}}):"
      - "for index, {{item_singular}} in enumerate({{list_name}}):"
    hints:
      - enumerate() gives index and value
      - Use tuple unpacking
    tags: [loops, enumerate, intermediate]

  - slug: break-statement
    objective: "Use break to exit a loop early based on a condition"
    title: Break Statement
    difficulty: 1
    concept: loops
    subconcept: for
    level: intro
    prereqs: [foundations, for, while]
    type: write
    pattern: iteration
    prompt: Write just the statement that immediately exits a loop
    expected_answer: break
    accepted_solutions:
      - break
      - "break"
    hints:
      - This keyword stops the loop and moves to the code after it
      - It's a single keyword, no parentheses needed
    tags: [loops, control, intermediate]

  # --- Additional Control Flow ---
  - slug: continue-statement
    objective: "Use continue to skip the current iteration and proceed to the next"
    title: Continue Statement
    difficulty: 1
    concept: loops
    subconcept: for
    level: intro
    prereqs: [for]
    type: write
    pattern: iteration
    prompt: Write just the statement that skips the current iteration and moves to the next
    expected_answer: continue
    accepted_solutions:
      - continue
      - "continue"
    hints:
      - This keyword skips to the next loop iteration
      - It doesn't exit the loop entirely (that's break)
    tags: [loops, control, intermediate]

  - slug: for-range-step-dynamic
    objective: "Use range() with start, stop, and step parameters for custom iteration"
    title: Dynamic Range Step Loop
    difficulty: 2
    concept: loops
    subconcept: for
    level: practice
    prereqs: [for]
    type: write
    pattern: iteration
    generator: loop-simulation
    prompt: Write a for-loop header using `range({{start}}, {{stop}}, {{step}})`
    expected_answer: "for i in range({{start}}, {{stop}}, {{step}}):"
    accepted_solutions:
      - "for i in range({{start}}, {{stop}}, {{step}}):"
      - "for i in range({{start}},{{stop}},{{step}}):"
      - "for x in range({{start}}, {{stop}}, {{step}}):"
      - "for n in range({{start}}, {{stop}}, {{step}}):"
    hints:
      - range(start, stop, step)
      - Stop value is exclusive
    tags: [loops, range, step, dynamic]

  - slug: for-zip
    objective: "Use zip() to iterate over multiple sequences in parallel"
    title: For Loop with Zip
    difficulty: 2
    concept: loops
    subconcept: iteration
    level: practice
    prereqs: [for]
    type: write
    pattern: iteration
    prompt: Loop over {{list_name}} and statuses lists simultaneously using {{item_singular}} and {{status_var}} variables
    expected_answer: "for {{item_singular}}, {{status_var}} in zip({{list_name}}, statuses):"
    accepted_solutions:
      - "for {{item_singular}}, {{status_var}} in zip({{list_name}}, statuses):"
    hints:
      - Use zip() to pair elements
      - Unpack with two variables
    tags: [loops, zip, iteration]

  - slug: while-true-break
    objective: "Create an infinite loop pattern with controlled exit using break"
    title: While True with Break
    difficulty: 2
    concept: loops
    subconcept: while
    level: edge
    prereqs: [while]
    type: write
    pattern: iteration
    prompt: Write just the header line that creates an infinite loop (the body will use break to exit)
    expected_answer: "while True:"
    accepted_solutions:
      - "while True:"
      - "while 1:"
    hints:
      - Use while with a constant truthy value
      - The loop body (not shown) will use break to exit
    tags: [loops, while, infinite]

  - slug: for-else
    objective: "Apply the else clause on a for loop for post-iteration logic"
    title: For-Else Clause
    difficulty: 3
    concept: loops
    subconcept: for
    level: edge
    prereqs: [for]
    type: write
    pattern: iteration
    prompt: Write just the line that starts the else clause of a for-else construct (runs when loop completes without break)
    expected_answer: "else:"
    accepted_solutions:
      - "else:"
    hints:
      - Keyword followed by colon
      - Same indentation as the for keyword
    tags: [loops, else, advanced]

  # --- zip Subconcept ---
  - slug: zip-two-lists
    objective: "Use zip() to iterate over two lists simultaneously"
    title: Zip Two Lists
    difficulty: 1
    concept: loops
    subconcept: zip
    level: intro
    prereqs: [for]
    type: write
    pattern: iteration
    prompt: Use zip to iterate over {{list_name}} and priorities lists together with {{item_singular}} and {{attr_key_2}}
    expected_answer: "for {{item_singular}}, {{attr_key_2}} in zip({{list_name}}, priorities):"
    accepted_solutions:
      - "for {{item_singular}}, {{attr_key_2}} in zip({{list_name}}, priorities):"
      - "for ({{item_singular}}, {{attr_key_2}}) in zip({{list_name}}, priorities):"
    hints:
      - zip() combines iterables into pairs
      - Use tuple unpacking in the for loop header
    tags: [loops, zip, parallel]

  - slug: zip-intro
    objective: Use zip to combine two lists for parallel iteration
    title: Zip Function Intro
    difficulty: 1
    concept: loops
    subconcept: zip
    level: intro
    prereqs: [for]
    type: write
    pattern: iteration
    prompt: Write the `zip()` call that pairs {{list_name}} and statuses for parallel iteration
    expected_answer: "zip({{list_name}}, statuses)"
    accepted_solutions:
      - "zip({{list_name}}, statuses)"
    hints:
      - zip pairs elements at same positions
      - Pass both lists as arguments
    tags: [loops, zip, intro]

  - slug: zip-three-lists
    objective: "Apply zip() to iterate over three lists in parallel"
    title: Zip Three Lists
    difficulty: 2
    concept: loops
    subconcept: zip
    level: practice
    prereqs: [zip]
    type: write
    pattern: iteration
    prompt: Use zip to iterate over {{list_name}}, statuses, and priorities lists simultaneously using {{item_singular}}, {{status_var}}, {{attr_key_2}}
    expected_answer: "for {{item_singular}}, {{status_var}}, {{attr_key_2}} in zip({{list_name}}, statuses, priorities):"
    accepted_solutions:
      - "for {{item_singular}}, {{status_var}}, {{attr_key_2}} in zip({{list_name}}, statuses, priorities):"
    hints:
      - zip() can take multiple iterables
      - Unpack all three variables
    tags: [zip, iteration, multiple]

  - slug: zip-unequal-lengths
    objective: "Handle zip() behavior with iterables of unequal length using zip_longest"
    title: Zip Unequal Lists
    difficulty: 3
    concept: loops
    subconcept: zip
    level: edge
    prereqs: [zip]
    type: write
    pattern: iteration
    prompt: Import `zip_longest` from itertools and use it to iterate over {{list_name}} and statuses even if their lengths differ. Use fillvalue="pending" for missing values.
    expected_answer: |
      from itertools import zip_longest
      for {{item_singular}}, {{status_var}} in zip_longest({{list_name}}, statuses, fillvalue="pending"):
    accepted_solutions:
      - |
        from itertools import zip_longest
        for {{item_singular}}, {{status_var}} in zip_longest({{list_name}}, statuses, fillvalue="pending"):
      - |
        from itertools import zip_longest
        for {{item_singular}}, {{status_var}} in zip_longest({{list_name}}, statuses, fillvalue='pending'):
      - |
        from itertools import zip_longest
        for item, status in zip_longest({{list_name}}, statuses, fillvalue="pending"):
    hints:
      - First import zip_longest from itertools
      - Then use it with fillvalue for missing elements
    tags: [zip, itertools, edge-case]

  # --- reversed Subconcept ---
  - slug: reversed-list
    objective: "Use reversed() to iterate over a list in reverse order"
    title: Reversed List Iteration
    difficulty: 1
    concept: loops
    subconcept: reversed
    level: intro
    prereqs: [for]
    type: write
    pattern: iteration
    prompt: Iterate over {{list_name}} in reverse order
    expected_answer: "for {{item_singular}} in reversed({{list_name}}):"
    accepted_solutions:
      - "for {{item_singular}} in reversed({{list_name}}):"
      - "for item in reversed({{list_name}}):"
      - "for x in reversed({{list_name}}):"
    hints:
      - reversed() returns an iterator
      - Works on sequences
    tags: [reversed, iteration]

  - slug: reversed-intro
    objective: Use reversed() to iterate backwards through a sequence
    title: Reversed Function Intro
    difficulty: 1
    concept: loops
    subconcept: reversed
    level: intro
    prereqs: [for]
    type: write
    pattern: iteration
    prompt: Iterate through {{list_name}} in reverse order
    expected_answer: "for {{item_singular}} in reversed({{list_name}}):"
    accepted_solutions:
      - "for {{item_singular}} in reversed({{list_name}}):"
      - "for x in reversed({{list_name}}):"
    hints:
      - reversed() wraps the iterable
      - Original list is not modified
    tags: [loops, reversed, intro]

  - slug: reversed-range
    objective: "Combine reversed() with range() to count down"
    title: Reversed Range
    difficulty: 2
    concept: loops
    subconcept: reversed
    level: practice
    prereqs: [reversed, for]
    type: write
    pattern: iteration
    prompt: Count down from 5 to 1 using reversed and range
    expected_answer: "for i in reversed(range(1, 6)):"
    accepted_solutions:
      - "for i in reversed(range(1, 6)):"
      - "for num in reversed(range(1, 6)):"
      - "for n in reversed(range(1, 6)):"
      - "for x in reversed(range(1, 6)):"
    hints:
      - Wrap range() with reversed()
      - range(1, 6) gives 1-5
    tags: [reversed, range, countdown]

  - slug: reversed-enumerate
    objective: "Combine reversed() with enumerate() while maintaining original indices"
    title: Reversed with Enumerate
    difficulty: 3
    concept: loops
    subconcept: reversed
    level: edge
    prereqs: [reversed, iteration]
    type: write
    pattern: iteration
    prompt: Iterate over {{list_name}} in reverse while keeping track of original indices
    expected_answer: "for i, {{item_singular}} in reversed(list(enumerate({{list_name}}))):"
    accepted_solutions:
      - "for i, {{item_singular}} in reversed(list(enumerate({{list_name}}))):"
      - "for idx, {{item_singular}} in reversed(list(enumerate({{list_name}}))):"
      - "for index, {{item_singular}} in reversed(list(enumerate({{list_name}}))):"
      - "for i, item in reversed(list(enumerate({{list_name}}))):"
    hints:
      - enumerate() then reversed()
      - Convert to list first for reversed()
    tags: [reversed, enumerate, indices]

  # --- sorted Subconcept ---
  - slug: sorted-list
    objective: "Use sorted() to iterate over a list in sorted order"
    title: Sorted List Iteration
    difficulty: 1
    concept: loops
    subconcept: sorted
    level: intro
    prereqs: [for]
    type: write
    pattern: iteration
    prompt: Iterate over {{list_name}} in sorted order
    expected_answer: "for {{item_singular}} in sorted({{list_name}}):"
    accepted_solutions:
      - "for {{item_singular}} in sorted({{list_name}}):"
      - "for item in sorted({{list_name}}):"
      - "for x in sorted({{list_name}}):"
    hints:
      - sorted() returns a new sorted list
      - Original list unchanged
    tags: [sorted, iteration]

  - slug: sorted-intro
    objective: Use sorted() to iterate through items in sorted order
    title: Sorted Function Intro
    difficulty: 1
    concept: loops
    subconcept: sorted
    level: intro
    prereqs: [for]
    type: write
    pattern: iteration
    prompt: Iterate through {{list_name}} list in sorted order
    expected_answer: "for {{item_singular}} in sorted({{list_name}}):"
    accepted_solutions:
      - "for {{item_singular}} in sorted({{list_name}}):"
      - "for item in sorted({{list_name}}):"
      - "for x in sorted({{list_name}}):"
    hints:
      - sorted() returns a new sorted list
      - Original list is not modified
    tags: [loops, sorted, intro]

  - slug: sorted-reverse
    objective: "Use sorted() with reverse=True for descending order"
    title: Sorted Descending
    difficulty: 2
    concept: loops
    subconcept: sorted
    level: practice
    prereqs: [sorted]
    type: write
    pattern: iteration
    prompt: Iterate over {{list_name}} in descending (reverse) order
    expected_answer: "for {{item_singular}} in sorted({{list_name}}, reverse=True):"
    accepted_solutions:
      - "for {{item_singular}} in sorted({{list_name}}, reverse=True):"
      - "for item in sorted({{list_name}}, reverse=True):"
      - "for x in sorted({{list_name}}, reverse=True):"
    hints:
      - Use reverse parameter
      - reverse=True for descending
    tags: [sorted, reverse, descending]

  - slug: sorted-key-len
    objective: "Use sorted() with key parameter to sort by string length"
    title: Sorted by Length
    difficulty: 2
    concept: loops
    subconcept: sorted
    level: practice
    prereqs: [sorted]
    type: write
    pattern: iteration
    prompt: Sort {{list_name}} list by string length using the key parameter
    expected_answer: "for {{item_singular}} in sorted({{list_name}}, key=len):"
    accepted_solutions:
      - "for {{item_singular}} in sorted({{list_name}}, key=len):"
      - "for item in sorted({{list_name}}, key=len):"
      - "for x in sorted({{list_name}}, key=len):"
    hints:
      - key= specifies sort criteria
      - len function as key
    tags: [sorted, key, length]

  - slug: sorted-key-lambda-tuples
    objective: "Use sorted() with a lambda key function for custom sorting"
    title: Sorted with Lambda Key
    difficulty: 3
    concept: loops
    subconcept: sorted
    level: edge
    prereqs: [sorted, lambda]
    type: write
    pattern: iteration
    prompt: Sort a list of {{item_singular}} tuples by the {{attr_key_1}} (second element) using a lambda
    expected_answer: "for {{item_singular}} in sorted({{list_name}}, key=lambda x: x[1]):"
    accepted_solutions:
      - "for {{item_singular}} in sorted({{list_name}}, key=lambda x: x[1]):"
      - "for item in sorted({{list_name}}, key=lambda x: x[1]):"
      - "for {{item_singular}} in sorted({{list_name}}, key=lambda t: t[1]):"
      - "for {{item_singular}} in sorted({{list_name}}, key=lambda item: item[1]):"
    hints:
      - lambda creates inline function
      - x[1] accesses second element
    tags: [sorted, key, lambda, tuples]

  # --- any-all Subconcept ---
  - slug: any-basic
    objective: "Use any() to check if any element in an iterable is truthy"
    title: Any Check
    difficulty: 1
    concept: loops
    subconcept: any-all
    level: intro
    prereqs: [if-else]
    type: write
    pattern: invocation
    prompt: Write a Python expression that returns True if any {{item_singular}} in {{list_name}} has {{attr_key_1}} greater than 10
    expected_answer: "any({{item_singular}}.{{attr_key_1}} > 10 for {{item_singular}} in {{list_name}})"
    accepted_solutions:
      - "any({{item_singular}}.{{attr_key_1}} > 10 for {{item_singular}} in {{list_name}})"
      - "any(item.{{attr_key_1}} > 10 for item in {{list_name}})"
      - "any(x.{{attr_key_1}} > 10 for x in {{list_name}})"
    hints:
      - any() returns True if any element is truthy
      - Use generator expression inside
    tags: [any, boolean, iteration]

  - slug: all-basic
    objective: "Use all() to check if all elements in an iterable are truthy"
    title: All Check
    difficulty: 1
    concept: loops
    subconcept: any-all
    level: intro
    prereqs: [if-else]
    type: write
    pattern: invocation
    prompt: Write a Python expression that returns True if all {{item_plural}} in {{list_name}} are {{status_var}} (where `is_{{status_var}}` is True)
    expected_answer: "all({{item_singular}}.is_{{status_var}} for {{item_singular}} in {{list_name}})"
    accepted_solutions:
      - "all({{item_singular}}.is_{{status_var}} for {{item_singular}} in {{list_name}})"
      - "all(item.is_{{status_var}} for item in {{list_name}})"
      - "all(x.is_{{status_var}} for x in {{list_name}})"
    hints:
      - all() returns True if all elements are truthy
      - Use generator expression inside
    tags: [all, boolean, iteration]

  - slug: any-with-condition
    objective: "Apply any() with a complex condition to search an iterable"
    title: Any with String Check
    difficulty: 2
    concept: loops
    subconcept: any-all
    level: practice
    prereqs: [any-all]
    type: write
    pattern: invocation
    prompt: Write a Python expression that returns True if any {{item_singular}} in {{list_name}} starts with the letter 'a'
    expected_answer: "any({{item_singular}}.startswith('a') for {{item_singular}} in {{list_name}})"
    accepted_solutions:
      - "any({{item_singular}}.startswith('a') for {{item_singular}} in {{list_name}})"
      - 'any({{item_singular}}.startswith("a") for {{item_singular}} in {{list_name}})'
      - "any(item.startswith('a') for item in {{list_name}})"
      - 'any(item.startswith("a") for item in {{list_name}})'
      - "any(x.startswith('a') for x in {{list_name}})"
      - 'any(x.startswith("a") for x in {{list_name}})'
      - "any(s.startswith('a') for s in {{list_name}})"
      - 'any(s.startswith("a") for s in {{list_name}})'
    hints:
      - Use startswith() method
      - Generator expression with condition
    tags: [any, strings, startswith]

  - slug: any-all-combined
    objective: "Combine any() and all() in a conditional expression"
    title: Any and All Combined
    difficulty: 3
    concept: loops
    subconcept: any-all
    level: edge
    prereqs: [any-all, if-else]
    type: write
    pattern: conditional
    prompt: Write an if-statement header that checks if all {{item_plural}} are {{status_var}} AND at least one {{item_singular}} has a truthy {{attr_key_1}}
    expected_answer: "if all({{item_singular}}.is_{{status_var}} for {{item_singular}} in {{list_name}}) and any({{item_singular}}.{{attr_key_1}} for {{item_singular}} in {{list_name}}):"
    accepted_solutions:
      - "if all({{item_singular}}.is_{{status_var}} for {{item_singular}} in {{list_name}}) and any({{item_singular}}.{{attr_key_1}} for {{item_singular}} in {{list_name}}):"
      - "if all(item.is_{{status_var}} for item in {{list_name}}) and any(item.{{attr_key_1}} for item in {{list_name}}):"
    hints:
      - Combine with 'and' operator
      - all() for universal check, any() for existence
    tags: [any, all, combined, conditional]

  # --- Fill-in Exercises ---
  - slug: for-loop-fill
    objective: Complete the for loop syntax
    title: For Loop Fill-in
    difficulty: 1
    concept: loops
    subconcept: for
    level: intro
    prereqs: []
    type: fill-in
    blank_position: 0
    pattern: iteration
    prompt: Fill in the keyword that starts a {{item_singular}} loop
    template: "___ {{item_singular}} in {{list_name}}:"
    expected_answer: "for"
    hints:
      - Keyword that starts iteration
      - Always followed by 'in'
    tags: [control-flow, for, fill-in]

  - slug: range-fill
    objective: Complete the range function call
    title: Range Fill-in
    difficulty: 1
    concept: loops
    subconcept: for
    level: intro
    prereqs: [for]
    type: fill-in
    blank_position: 0
    pattern: iteration
    prompt: Fill in the function that generates a sequence of {{item_singular}} indices
    template: "for {{item_singular}}_idx in ___(5):"
    expected_answer: "range"
    hints:
      - Built-in function for number sequences
      - range(n) gives 0 through n-1
    tags: [control-flow, range, fill-in]

  - slug: enumerate-fill
    objective: Complete the enumerate function call
    title: Enumerate Fill-in
    difficulty: 2
    concept: loops
    subconcept: iteration
    level: practice
    prereqs: [for]
    type: fill-in
    blank_position: 0
    pattern: iteration
    prompt: Fill in the function that provides index and {{item_singular}} pairs
    template: "for i, {{item_singular}} in ___({{list_name}}):"
    expected_answer: "enumerate"
    hints:
      - Function that provides index with each element
      - Avoids manual counter tracking
    tags: [control-flow, enumerate, fill-in]

  - slug: break-fill
    objective: Complete the loop exit keyword
    title: Break Fill-in
    difficulty: 1
    concept: loops
    subconcept: for
    level: intro
    prereqs: [for]
    type: fill-in
    blank_position: 0
    pattern: control
    prompt: Fill in the keyword that exits the {{item_singular}} loop immediately
    template: |
      for {{item_singular}} in {{list_name}}:
          if {{item_singular}} == target_{{item_singular}}:
              ___
    expected_answer: "break"
    hints:
      - Keyword to exit loop early
      - Loop body after break is skipped
    tags: [control-flow, break, fill-in]

  - slug: continue-fill
    objective: Complete the skip iteration keyword
    title: Continue Fill-in
    difficulty: 1
    concept: loops
    subconcept: for
    level: intro
    prereqs: [for]
    type: fill-in
    blank_position: 0
    pattern: control
    prompt: Fill in the keyword that skips to the next {{item_singular}}
    template: |
      for {{item_singular}} in {{list_name}}:
          if {{item_singular}}_{{status_var}} < 0:
              ___
    expected_answer: "continue"
    hints:
      - Keyword to skip rest of current iteration
      - Loop continues with next {{item_singular}}
    tags: [control-flow, continue, fill-in]

  - slug: while-condition-fill
    objective: Complete the while loop condition
    title: While Condition Fill-in
    difficulty: 2
    concept: loops
    subconcept: while
    level: practice
    prereqs: [while]
    type: fill-in
    blank_position: 0
    pattern: iteration
    prompt: Fill in the comparison operator for "{{item_singular}} count less than max"
    template: "while {{item_singular}}_count ___ max_{{item_plural}}:"
    expected_answer: "<"
    hints:
      - Comparison operator
      - Less than symbol
    tags: [control-flow, while, fill-in]

  # --- Predict Exercises ---
  - slug: for-range-predict
    objective: Predict the output of a for loop with range
    title: Range Output Predict
    difficulty: 1
    concept: loops
    subconcept: for
    level: intro
    prereqs: [for]
    type: predict
    grading_strategy: execution
    pattern: iteration
    prompt: What does this range loop print?
    code: |
      for {{item_singular}}_idx in range(3):
          print({{item_singular}}_idx)
    expected_answer: |
      0
      1
      2
    hints:
      - range(3) produces 0, 1, 2
      - One {{item_singular}} index per line
    tags: [control-flow, range, predict]

  - slug: enumerate-predict
    objective: Predict the output of enumerate
    title: Enumerate Output Predict
    difficulty: 2
    concept: loops
    subconcept: iteration
    level: practice
    prereqs: [for]
    type: predict
    grading_strategy: execution
    pattern: iteration
    prompt: What does this enumerate loop print?
    code: |
      for i, {{item_singular}}_char in enumerate("abc"):
          print(i, {{item_singular}}_char)
    expected_answer: |
      0 a
      1 b
      2 c
    hints:
      - enumerate provides index and {{item_singular}} value
      - Index starts at 0 by default
    tags: [control-flow, enumerate, predict]

  - slug: break-predict
    objective: Predict loop behavior with break
    title: Break Predict
    difficulty: 2
    concept: loops
    subconcept: for
    level: practice
    prereqs: [for]
    type: predict
    grading_strategy: execution
    pattern: control
    prompt: What does this loop with break print?
    code: |
      for {{item_singular}}_idx in range(5):
          if {{item_singular}}_idx == 3:
              break
          print({{item_singular}}_idx)
    expected_answer: |
      0
      1
      2
    hints:
      - break exits immediately when condition met
      - "{{item_singular}}_idx==3 happens before printing 3"
    tags: [control-flow, break, predict]

  - slug: continue-predict
    objective: Predict loop behavior with continue
    title: Continue Predict
    difficulty: 2
    concept: loops
    subconcept: for
    level: practice
    prereqs: [for]
    type: predict
    grading_strategy: execution
    pattern: control
    prompt: What does this loop with continue print?
    code: |
      for {{item_singular}}_idx in range(5):
          if {{item_singular}}_idx == 2:
              continue
          print({{item_singular}}_idx)
    expected_answer: |
      0
      1
      3
      4
    hints:
      - continue skips current {{item_singular}} iteration only
      - Loop resumes with next value
    tags: [control-flow, continue, predict]

  - slug: zip-predict
    objective: Predict the output of zip iteration
    title: Zip Output Predict
    difficulty: 2
    concept: loops
    subconcept: zip
    level: practice
    prereqs: [for]
    type: predict
    grading_strategy: execution
    pattern: iteration
    prompt: What does this zip loop print?
    code: |
      for {{item_singular}}_id, {{status_var}} in zip([1, 2], ["{{item_example}}", "done"]):
          print({{item_singular}}_id, {{status_var}})
    expected_answer: |
      1 {{item_example}}
      2 done
    hints:
      - zip pairs {{item_plural}} from both lists
      - First pair is (1, "{{item_example}}"), second is (2, "done")
    tags: [control-flow, zip, predict]

  - slug: nested-loop-predict
    objective: Predict nested loop output
    title: Nested Loop Predict
    difficulty: 3
    concept: loops
    subconcept: for
    level: edge
    prereqs: [for]
    type: predict
    grading_strategy: execution
    pattern: iteration
    prompt: What does this nested {{item_singular}} loop print?
    code: |
      for {{item_singular}}_row in range(2):
          for {{item_singular}}_col in range(2):
              print({{item_singular}}_row, {{item_singular}}_col)
    expected_answer: |
      0 0
      0 1
      1 0
      1 1
    hints:
      - Inner loop completes for each outer {{item_singular}} iteration
      - 2 x 2 = 4 total {{item_plural}} printed
    tags: [control-flow, nested, predict]

  # --- Dynamic Exercises ---
  - slug: for-loop-list-dynamic
    objective: Write a for loop to iterate over a list with specific values
    title: Dynamic For Loop List
    difficulty: 1
    concept: loops
    subconcept: for
    level: intro
    prereqs: [foundations]
    type: write
    pattern: iteration
    generator: list-values
    prompt: Write a for loop that prints each {{item_singular}} in the {{list_name}} [{{a}}, {{b}}, {{c}}]
    expected_answer: |
      for {{item_singular}} in [{{a}}, {{b}}, {{c}}]:
          print({{item_singular}})
    accepted_solutions:
      - |
        for {{item_singular}} in [{{a}}, {{b}}, {{c}}]:
            print({{item_singular}})
      - |
        for item in [{{a}}, {{b}}, {{c}}]:
            print(item)
      - |
        for x in [{{a}}, {{b}}, {{c}}]:
            print(x)
      - |
        for i in [{{a}}, {{b}}, {{c}}]:
            print(i)
    hints:
      - Use for x in list syntax
      - Print each {{item_singular}} inside the loop
    tags: [control-flow, for, dynamic]

  - slug: if-greater-dynamic
    objective: Write an if statement comparing two dynamic values
    title: Dynamic If Greater
    difficulty: 1
    concept: conditionals
    subconcept: if-else
    level: intro
    prereqs: [foundations]
    type: write
    pattern: conditional
    generator: arithmetic-values
    prompt: Write an if-statement header that checks if {{x}} is greater than {{y}}
    expected_answer: "if {{x}} > {{y}}:"
    accepted_solutions:
      - "if {{x}} > {{y}}:"
    hints:
      - Use the > comparison operator
      - End with a colon
    tags: [control-flow, conditionals, dynamic]

  - slug: enumerate-start-dynamic
    objective: Use enumerate with a custom starting index
    title: Dynamic Enumerate Start
    difficulty: 2
    concept: loops
    subconcept: iteration
    level: practice
    prereqs: [for]
    type: write
    pattern: iteration
    generator: index-values
    target_construct:
      type: enumerate
      feedback: "Use enumerate({{list_name}}, start={{idx}}) for numbered iteration"
    prompt: Loop over {{list_name}} with enumerate starting at index {{idx}}
    expected_answer: "for i, {{item_singular}} in enumerate({{list_name}}, {{idx}}):"
    accepted_solutions:
      - "for i, {{item_singular}} in enumerate({{list_name}}, {{idx}}):"
      - "for i, {{item_singular}} in enumerate({{list_name}}, start={{idx}}):"
      - "for idx, {{item_singular}} in enumerate({{list_name}}, {{idx}}):"
      - "for idx, {{item_singular}} in enumerate({{list_name}}, start={{idx}}):"
      - "for i, item in enumerate({{list_name}}, {{idx}}):"
      - "for i, item in enumerate({{list_name}}, start={{idx}}):"
    hints:
      - enumerate() accepts a start parameter
      - Use tuple unpacking for index and value
    tags: [control-flow, enumerate, dynamic]

  - slug: for-sum-pair-dynamic
    objective: Predict the sum accumulated in a for loop
    title: Dynamic For Sum Predict
    difficulty: 2
    concept: loops
    subconcept: for
    level: practice
    prereqs: [for]
    type: predict
    grading_strategy: execution
    pattern: accumulator
    generator: arithmetic-values
    prompt: "Given {{item_plural}} [{{x}}, {{y}}], what does this code print?"
    code: |
      total = 0
      for {{item_singular}} in [{{x}}, {{y}}]:
          total += {{item_singular}}
      print(total)
    expected_answer: "{{sum}}"
    hints:
      - Track the running total through each iteration
      - Add each {{item_singular}} to total
    tags: [control-flow, for, accumulator, dynamic]

  - slug: while-countdown-dynamic
    objective: Write a while loop that decrements a counter variable
    title: Dynamic While Countdown
    difficulty: 2
    concept: loops
    subconcept: while
    level: practice
    prereqs: [while]
    type: write
    pattern: iteration
    generator: index-values
    prompt: Write a while loop that decrements `count` until it reaches 0. Assume `count` starts at {{idx}}.
    expected_answer: |
      while count > 0:
          count -= 1
    accepted_solutions:
      - |
        while count > 0:
            count -= 1
      - |
        while count > 0:
            count = count - 1
      - |
        while count >= 1:
            count -= 1
    hints:
      - Loop while count is positive
      - Decrement count inside the loop body
    tags: [control-flow, while, dynamic]

  - slug: range-output-dynamic
    objective: Predict the output of range() with dynamic parameters
    title: Dynamic Range Output
    difficulty: 2
    concept: loops
    subconcept: for
    level: practice
    prereqs: [for]
    type: predict
    grading_strategy: execution
    pattern: iteration
    generator: loop-simulation
    prompt: "What does this code print?"
    code: |
      for i in range({{start}}, {{stop}}, {{step}}):
          print(i)
    expected_answer: "{{output}}"
    hints:
      - range(start, stop, step) generates numbers
      - stop is exclusive
    tags: [control-flow, range, dynamic]

  - slug: comparison-result-dynamic
    objective: Predict the result of a comparison expression
    title: Dynamic Comparison Result
    difficulty: 1
    concept: conditionals
    subconcept: if-else
    level: intro
    prereqs: [foundations]
    type: predict
    grading_strategy: execution
    pattern: comparison
    generator: comparison-logic
    prompt: "What does {{a}} {{op}} {{b}} evaluate to?"
    code: |
      print({{a}} {{op}} {{b}})
    expected_answer: "{{result}}"
    hints:
      - Compare the two values using the operator
      - Result is always True or False
    tags: [control-flow, comparison, dynamic]

  - slug: bool-compound-dynamic
    objective: Predict the result of a compound boolean expression
    title: Dynamic Compound Boolean
    difficulty: 2
    concept: conditionals
    subconcept: if-else
    level: practice
    prereqs: [foundations, comparisons]
    type: predict
    grading_strategy: execution
    pattern: logical
    generator: bool-logic
    prompt: "What does this expression evaluate to?"
    code: |
      print({{expression}})
    expected_answer: "{{result}}"
    hints:
      - "This expression {{description}}"
      - Evaluate each part separately then combine
    tags: [control-flow, boolean, dynamic]

  - slug: if-bool-logic-dynamic
    objective: Write an if statement with a compound boolean condition
    title: Dynamic Boolean If Statement
    difficulty: 2
    concept: conditionals
    subconcept: if-else
    level: practice
    prereqs: [if-else, comparisons]
    type: write
    pattern: conditional
    generator: bool-logic
    prompt: "Write an if statement that checks if {{description}} (using a={{a}}, b={{b}})"
    expected_answer: "if {{expression}}:"
    accepted_solutions:
      - "if {{expression}}:"
    hints:
      - "Use the boolean operators (and, or, not)"
      - End with a colon
    tags: [control-flow, boolean, conditionals, dynamic]

  - slug: for-list-total-dynamic
    objective: Predict the final value after loop accumulation
    title: Dynamic For List Total
    difficulty: 2
    concept: loops
    subconcept: for
    level: practice
    prereqs: [for]
    type: predict
    grading_strategy: execution
    pattern: accumulator
    generator: list-values
    prompt: "What does this code print when summing the {{list_name}}?"
    code: |
      total = 0
      for {{item_singular}} in [{{a}}, {{b}}, {{c}}]:
          total += {{item_singular}}
      print(total)
    expected_answer: "{{sum}}"
    hints:
      - Add each {{item_singular}} to total
      - Output the final total after the loop
    tags: [control-flow, for, accumulator, dynamic]

  # --- If/Elif/Else Chain Exercises (using conditional-chain generator) ---
  - slug: if-elif-else-predict-dynamic
    objective: Predict which branch is taken in an if/elif/else chain
    title: Dynamic If/Elif/Else Chain
    difficulty: 2
    concept: conditionals
    subconcept: elif-chains
    level: practice
    prereqs: [if-else]
    type: predict
    grading_strategy: execution
    pattern: conditional
    generator: conditional-chain
    prompt: "What does this code print?"
    code: "{{code}}"
    expected_answer: "{{result}}"
    hints:
      - "This is a {{description}} classification"
      - Check conditions from top to bottom
      - First matching condition wins
    tags: [control-flow, conditionals, elif, dynamic]

  - slug: if-elif-chain-trace-dynamic
    objective: Identify which branch executes for a given input value
    title: Dynamic Branch Trace
    difficulty: 2
    concept: conditionals
    subconcept: elif-chains
    level: edge
    prereqs: [if-else]
    type: predict
    grading_strategy: execution
    pattern: conditional
    generator: conditional-chain
    prompt: "For input value {{value}}, which branch executes (output the result)?"
    code: "{{code}}"
    expected_answer: "{{result}}"
    hints:
      - Evaluate each condition in order
      - Stop at the first True condition
    tags: [control-flow, conditionals, tracing, dynamic]

  # --- Dynamic Sorted/Reversed Exercises ---
  - slug: sorted-predict-dynamic
    objective: Predict the output of sorted() or reversed()
    title: Dynamic Sorted/Reversed
    difficulty: 2
    concept: loops
    subconcept: sorted
    level: practice
    prereqs: [for]
    type: predict
    grading_strategy: execution
    pattern: transformation
    generator: sorted-list
    prompt: "What does this code return?"
    code: "{{code}}"
    expected_answer: "{{output}}"
    hints:
      - "{{func}}() returns a new sequence"
      - Original list is unchanged
    tags: [sorted, reversed, dynamic]

  - slug: sorted-write-dynamic
    objective: Write the correct sorted/reversed call
    title: Write Sorted Call
    difficulty: 2
    concept: loops
    subconcept: sorted
    level: practice
    prereqs: [sorted]
    type: write
    pattern: transformation
    generator: sorted-list
    prompt: "Transform {{input}} to get {{output}}"
    expected_answer: "{{code}}"
    accepted_solutions:
      - "{{code}}"
    hints:
      - Use sorted() with reverse parameter if needed
      - Use list(reversed(...)) to reverse order
    tags: [sorted, dynamic, write]

  # --- Dynamic Any/All Exercises ---
  - slug: any-all-predict-dynamic
    objective: Predict the result of any() or all()
    title: Dynamic Any/All
    difficulty: 2
    concept: loops
    subconcept: any-all
    level: practice
    prereqs: [truthiness]
    type: predict
    grading_strategy: execution
    pattern: logical
    generator: any-all
    prompt: "What does this code return?"
    code: "{{code}}"
    expected_answer: "{{result}}"
    hints:
      - "{{description}}"
      - "{{func}}() checks elements for truthiness"
    tags: [any, all, dynamic]

  - slug: any-all-write-dynamic
    objective: Write the any/all expression for a list
    title: Write Any/All
    difficulty: 2
    concept: loops
    subconcept: any-all
    level: practice
    prereqs: [any-all]
    type: write
    pattern: logical
    generator: any-all
    prompt: "Write a Python expression that returns True if {{func}} elements in {{list}} are truthy"
    expected_answer: "{{func}}({{list}})"
    accepted_solutions:
      - "{{func}}({{list}})"
    hints:
      - "{{func}}() takes an iterable"
      - "Returns True or False based on element truthiness"
    tags: [any, all, dynamic, write]

  # --- Dynamic Zip Exercises ---
  - slug: zip-predict-dynamic
    objective: Predict the output of zip() on two lists
    title: Dynamic Zip Output
    difficulty: 2
    concept: loops
    subconcept: zip
    level: practice
    prereqs: [for]
    type: predict
    grading_strategy: execution
    pattern: iteration
    generator: zip-lists
    prompt: "What does this code return?"
    code: "list(zip({{list1}}, {{list2}}))"
    expected_answer: "{{output}}"
    hints:
      - "{{description}}"
      - zip() pairs elements by index
    tags: [zip, dynamic, predict]

  - slug: zip-sum-dynamic
    objective: Predict the result of a zip comprehension for pairwise operations
    title: Dynamic Zip Sum
    difficulty: 2
    concept: loops
    subconcept: zip
    level: practice
    prereqs: [zip, list-comp]
    type: predict
    grading_strategy: execution
    pattern: iteration
    generator: zip-lists
    prompt: "What does this code return?"
    code: "{{code}}"
    expected_answer: "{{output}}"
    hints:
      - zip pairs elements for the comprehension
      - a + b adds each pair
    tags: [zip, comprehension, dynamic]

  # --- Range Subconcept ---
  - slug: range-start-stop
    objective: Use range with start and stop arguments
    title: Range Start Stop
    difficulty: 1
    concept: loops
    subconcept: range
    level: intro
    prereqs: [for]
    type: write
    pattern: iteration
    prompt: Use range to generate numbers 1 through 5 (inclusive)
    expected_answer: range(1, 6)
    accepted_solutions:
      - range(1, 6)
      - "range(1, 6)"
    hints:
      - range(start, stop) - stop is exclusive
      - To include 5, stop must be 6
    tags: [range, start, stop]

  - slug: range-step
    objective: Use range with a step argument
    title: Range with Step
    difficulty: 2
    concept: loops
    subconcept: range
    level: practice
    prereqs: [range]
    type: write
    pattern: iteration
    prompt: Use range to generate even numbers 0, 2, 4, 6, 8
    expected_answer: range(0, 10, 2)
    accepted_solutions:
      - range(0, 10, 2)
      - range(0, 9, 2)
    hints:
      - Third argument is step
      - range(start, stop, step)
    tags: [range, step]

  - slug: range-negative-step
    objective: Use range to count backwards
    title: Range Backwards
    difficulty: 2
    concept: loops
    subconcept: range
    level: practice
    prereqs: [range]
    type: write
    pattern: iteration
    prompt: Use range to count down from 5 to 1 (inclusive)
    expected_answer: range(5, 0, -1)
    accepted_solutions:
      - range(5, 0, -1)
      - "range(5, 0, -1)"
    hints:
      - Use negative step
      - Start > stop when going backwards
    tags: [range, backwards, step]

  - slug: range-function-fill
    objective: Complete the range function call
    title: Range Function Fill
    difficulty: 1
    concept: loops
    subconcept: range
    level: intro
    prereqs: [for]
    type: fill-in
    blank_position: 0
    pattern: iteration
    prompt: Fill in the function that generates 0 through n-1
    template: "for i in ___(10):"
    expected_answer: "range"
    hints:
      - Which function generates a sequence of numbers?
      - Built-in Python function
    tags: [range, fill-in]

  - slug: range-predict
    objective: Predict the output of range
    title: Range Predict
    difficulty: 2
    concept: loops
    subconcept: range
    level: practice
    prereqs: [range]
    type: predict
    grading_strategy: execution
    pattern: iteration
    prompt: What does this code print?
    code: |
      print(list(range(2, 8, 2)))
    expected_answer: "[2, 4, 6]"
    accepted_solutions:
      - "[2, 4, 6]"
      - "[2,4,6]"
    hints:
      - Start at 2, stop before 8
      - Step by 2 each time
    tags: [range, predict]

  - slug: range-len-anti-pattern
    objective: Recognize the anti-pattern of range(len())
    title: Range Len Anti-Pattern
    difficulty: 2
    concept: loops
    subconcept: range
    level: edge
    prereqs: [range, iteration]
    type: predict
    grading_strategy: execution
    pattern: idiomatic
    prompt: Which version is more Pythonic?
    code: |
      items = ['a', 'b', 'c']

      # Version A
      for i in range(len(items)):
          print(items[i])

      # Version B
      for item in items:
          print(item)
    expected_answer: "Version B"
    hints:
      - Direct iteration is more readable
      - Avoid range(len()) when you don't need the index
    tags: [range, pythonic, anti-pattern]

  # --- Break & Continue Subconcept ---
  - slug: break-loop
    objective: Use break to exit a loop early
    title: Break Statement
    difficulty: 2
    concept: loops
    subconcept: break-continue
    level: intro
    prereqs: [for, while]
    type: write
    pattern: control
    prompt: Write a for loop that finds the first negative {{item_singular}} in {{list_name}} and breaks
    expected_answer: |
      for {{item_singular}} in {{list_name}}:
          if {{item_singular}} < 0:
              break
    accepted_solutions:
      - |
        for {{item_singular}} in {{list_name}}:
            if {{item_singular}} < 0:
                break
      - |
        for item in {{list_name}}:
            if item < 0:
                break
    hints:
      - break exits the entire {{item_singular}} loop
      - Useful for early exit when {{item_singular}} found
    tags: [break, control]

  - slug: continue-loop
    objective: Use continue to skip an iteration
    title: Continue Statement
    difficulty: 2
    concept: loops
    subconcept: break-continue
    level: intro
    prereqs: [for, while]
    type: write
    pattern: control
    prompt: Write a for loop that prints all {{item_plural}} in {{list_name}} except those that are {{status_var}} (skip {{status_var}} ones)
    expected_answer: |
      for {{item_singular}} in {{list_name}}:
          if {{item_singular}}.is_{{status_var}}:
              continue
          print({{item_singular}})
    accepted_solutions:
      - |
        for {{item_singular}} in {{list_name}}:
            if {{item_singular}}.is_{{status_var}}:
                continue
            print({{item_singular}})
      - |
        for item in {{list_name}}:
            if item.is_{{status_var}}:
                continue
            print(item)
    hints:
      - continue skips to next {{item_singular}} iteration
      - Avoids deep nesting with else for {{item_plural}}
    tags: [continue, control]

  - slug: break-keyword-fill
    objective: Complete the break statement
    title: Break Keyword Fill
    difficulty: 1
    concept: loops
    subconcept: break-continue
    level: intro
    prereqs: [for]
    type: fill-in
    blank_position: 0
    pattern: control
    prompt: Fill in the keyword that terminates the loop
    template: |
      for item in items:
          if item == target:
              ___
    expected_answer: "break"
    hints:
      - Which keyword exits a loop?
      - Stops iteration immediately
    tags: [break, fill-in]

  - slug: continue-keyword-fill
    objective: Complete the continue statement
    title: Continue Keyword Fill
    difficulty: 1
    concept: loops
    subconcept: break-continue
    level: intro
    prereqs: [for]
    type: fill-in
    blank_position: 0
    pattern: control
    prompt: Fill in the keyword that skips this iteration
    template: |
      for item in items:
          if not item.is_valid:
              ___
          process(item)
    expected_answer: "continue"
    hints:
      - Which keyword skips to next iteration?
      - Doesn't exit the loop, just this iteration
    tags: [continue, fill-in]

  - slug: break-output-predict
    objective: Predict loop behavior with break
    title: Break Output Predict
    difficulty: 2
    concept: loops
    subconcept: break-continue
    level: practice
    prereqs: [break-continue]
    type: predict
    grading_strategy: execution
    pattern: control
    prompt: What does this code print?
    code: |
      for i in range(5):
          if i == 3:
              break
          print(i)
    expected_answer: |
      0
      1
      2
    hints:
      - break stops at i == 3
      - 3 is never printed
    tags: [break, predict]

  - slug: continue-output-predict
    objective: Predict loop behavior with continue
    title: Continue Output Predict
    difficulty: 2
    concept: loops
    subconcept: break-continue
    level: practice
    prereqs: [break-continue]
    type: predict
    grading_strategy: execution
    pattern: control
    prompt: What does this code print?
    code: |
      for i in range(5):
          if i == 2:
              continue
          print(i)
    expected_answer: |
      0
      1
      3
      4
    hints:
      - continue skips only i == 2
      - Loop continues with i == 3
    tags: [continue, predict]

  - slug: break-else
    objective: Understand for-else with break
    title: For-Else Break
    difficulty: 3
    concept: loops
    subconcept: break-continue
    level: edge
    prereqs: [break-continue]
    type: predict
    grading_strategy: execution
    pattern: control
    prompt: What does this code print?
    code: |
      for n in [2, 4, 6]:
          if n % 2 != 0:
              print("Found odd")
              break
      else:
          print("All even")
    expected_answer: "All even"
    hints:
      - else runs if loop completes without break
      - No odd numbers found, so no break
    tags: [break, else, edge]

  # --- Additional Integrated Exercises ---
  - slug: loop-dict-accumulate
    objective: Iterate over a dict and accumulate values meeting a condition
    title: Dict Value Accumulator
    difficulty: 3
    concept: loops
    subconcept: for
    level: edge
    prereqs: [for, dicts, dict-iteration]
    type: write
    pattern: accumulator
    prompt: |
      Sum all values in {{item_singular}}_counts dict where the value is greater than 5.
      Use a for loop with .items() and accumulate into total.
    expected_answer: |
      total = 0
      for key, value in {{item_singular}}_counts.items():
          if value > 5:
              total += value
    accepted_solutions:
      - |
        total = 0
        for key, value in {{item_singular}}_counts.items():
            if value > 5:
                total += value
      - |
        total = 0
        for k, v in {{item_singular}}_counts.items():
            if v > 5:
                total += v
      - |
        total = 0
        for _, value in {{item_singular}}_counts.items():
            if value > 5:
                total += value
    hints:
      - "Initialize total before the loop"
      - "Use .items() to get both keys and values"
      - "Add to total only when condition is met"
    tags: [loops, dicts, accumulator]

  - slug: loop-nested-flatten
    objective: Flatten a nested list using nested loops
    title: Flatten Nested List
    difficulty: 3
    concept: loops
    subconcept: for
    level: edge
    prereqs: [for, lists]
    type: write
    pattern: transformation
    prompt: |
      Flatten {{list_name}}_nested (a list of lists) into a single flat_{{list_name}} list.
      Use nested for loops to append each item.
    expected_answer: |
      flat_{{list_name}} = []
      for sublist in {{list_name}}_nested:
          for item in sublist:
              flat_{{list_name}}.append(item)
    accepted_solutions:
      - |
        flat_{{list_name}} = []
        for sublist in {{list_name}}_nested:
            for item in sublist:
                flat_{{list_name}}.append(item)
      - |
        flat_{{list_name}} = []
        for sub in {{list_name}}_nested:
            for {{item_singular}} in sub:
                flat_{{list_name}}.append({{item_singular}})
    hints:
      - "Create an empty result list first"
      - "Outer loop iterates sublists, inner loop iterates items"
      - "Append each item to the flat list"
    tags: [loops, lists, nested, flatten]

  # --- Refactor Exercises (Anti-patterns  Idiomatic Python) ---