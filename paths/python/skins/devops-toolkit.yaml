# paths/python/skins/devops-toolkit.yaml
# Global skin - no blueprints restriction = usable with any Python blueprint

id: devops-toolkit
title: "DevOps Toolkit"
icon: "\U0001F528"
# NO blueprints field = global skin (usable with any blueprint)

vars:
  # REQUIRED existing fields (match current SkinVars interface)
  list_name: servers
  item_singular: server
  item_plural: servers
  item_examples:
    - "web-01"
    - "db-01"
    - "cache-01"
    - "api-01"
    - "worker-01"
    - "proxy-01"
  record_keys: ["hostname", "ip", "status", "cpu"]

  # Extended optional slots for broader exercise coverage
  attr_key_1: hostname
  attr_key_2: ip
  id_var: server_id
  filename: inventory.yaml
  filetype: yaml
  user_role: sysadmin
  status_var: healthy
  action_verb: deploy
  entity_name: Server

dataPack:
  list_sample: ["web-01", "db-01", "cache-01", "api-01"]
  dict_sample:
    hostname: "web-01"
    ip: "10.0.0.1"
    status: "running"
    cpu: 45
  records_sample:
    - { hostname: "web-01", ip: "10.0.0.1", status: "running" }
    - { hostname: "db-01", ip: "10.0.0.2", status: "stopped" }
    - { hostname: "cache-01", ip: "10.0.0.3", status: "running" }
  string_samples:
    - "Deployment started"
    - "Health check passed"
    - "Container restarted"
    - "Service scaled to 3 replicas"

contexts:
  # Setup & Storage
  list-create-empty: "Initialize an empty list to store server instances."
  list-create-values: "Define the list of servers to manage."
  tuple-create: "Store immutable config like (hostname, port)."
  list-append-dynamic: "Add a new server to the cluster."
  list-extend-method: "Add multiple servers from a discovery service."
  list-insert-dynamic: "Insert a server at a specific priority position."
  list-in-check: "Check if a server is already in the cluster."
  list-count: "Count how many servers have this status."
  list-index: "Find the position of a server in the rotation."
  dict-create-values: "Store server configuration with hostname and IP."
  dict-create-empty: "Create empty config for new server."
  dict-get-default: "Get server setting with sensible default."
  dict-set-item: "Update a server's configuration value."
  input-string: "Get the deployment target from operator."
  print-string: "Log a status message to the console."
  print-variable: "Display the current server status."

  # Display & Iteration
  for-loop-list: "Iterate over all servers for health checks."
  for-loop-string: "Parse each character in a config string."
  for-loop-range: "Process servers in batches by index."
  enumerate-basic: "Number servers for selection menu."
  enumerate-start: "Number servers starting from 1 for display."
  zip-basic: "Pair server names with their IP addresses."
  f-string-basic: "Format log message with server name and status."
  f-string-expression: "Show calculated uptime percentage."
  string-format: "Format the deployment summary."
  list-sorted: "Sort servers alphabetically for display."
  list-sort: "Sort servers by priority."
  list-reverse: "Show servers in reverse order."
  sorted-reverse: "Get servers sorted by CPU usage, highest first."
  while-loop-basic: "Poll until deployment completes."
  list-comp-filter-dynamic: "Filter to only running servers."
  list-comp-basic: "Get list of all hostnames."
  list-comp-conditional: "Get servers with CPU above threshold."

  # Logic & Validation
  if-else-basic: "Check if server is running or needs restart."
  if-only: "Check if cluster is empty."
  boolean-and: "Check if server is healthy AND under load limit."
  boolean-or: "Check if server is down OR unreachable."
  elif-grade: "Categorize server load: critical, warning, or normal."
  elif-http-status: "Handle different deployment status codes."
  match-case-basic: "Handle different operator commands."
  try-except-basic: "Handle connection timeouts gracefully."
  raise-intro: "Raise an error for invalid configuration."
  raise-exception: "Raise ServerNotFound when server is missing."
  except-specific: "Catch timeout errors on connection."
  except-multi: "Handle both TimeoutError and ConnectionError."
  try-else: "Run code only when connection succeeded."
  finally-basic: "Always close the SSH connection."
  try-except-finally: "Complete connection handling with cleanup."
  reraise: "Re-raise after logging the deployment error."

  # Organization & Persistence
  define-function: "Create a function to check server health."
  function-return: "Return the health check result."
  return-none: "Return None when server not found."
  default-param-simple: "Deploy with default timeout of 30s."
  default-param-intro: "Define optional deployment parameters."
  default-param-multiple: "Multiple defaults for server config."
  context-intro: "Write server inventory to a YAML file."
  file-open-write: "Write deployment log to disk."
  file-read-lines: "Load server inventory from file."
  pathlib-intro: "Use Path objects for config file management."
  pathlib-check-exists: "Check if config file exists."
  pathlib-create-path: "Create path to the configs directory."
  pathlib-join-paths: "Join paths for backup configs."
  main-guard-basic: "Only run deployment script when executed directly."
  import-from: "Import deployment utility functions."
  import-module: "Import the infrastructure module."

  # Comprehensions
  dict-comp-basic: "Create hostname to IP mapping."
  dict-comp-intro: "Build a dict of server configurations."

  # OOP
  define-class: "Create a Server class to represent infrastructure."
  init-method: "Initialize server with hostname and IP."
  instance-attribute: "Store server status as instance attribute."
  custom-exception: "Create a custom DeploymentError exception."
  active-users-integrated: "Use this step in the DevOps Toolkit workflow: Active Customers with Index."
  api-response-model-integrated: "Use this step in the DevOps Toolkit workflow: API Response Model."
  apply-coupon: "Use this step in the DevOps Toolkit workflow: Apply Coupon."
  boolean-all-check: "Use this step in the DevOps Toolkit workflow: All Products Check."
  conditional-dict-validation: "Use this step in the DevOps Toolkit workflow: Dict Key Validation."
  conditional-early-return: "Use this step in the DevOps Toolkit workflow: Guard Clause Pattern."
  conditional-list-any: "Use this step in the DevOps Toolkit workflow: Any Product Matches."
  config-loader-integrated: "Use this step in the DevOps Toolkit workflow: Safe JSON Config Loader."
  dict-from-parallel-lists: "Use this step in the DevOps Toolkit workflow: Dict from Two Lists."
  discount-tier-elif: "Use this step in the DevOps Toolkit workflow: Discount Tier."
  error-code-extractor-integrated: "Use this step in the DevOps Toolkit workflow: Error Code Extractor."
  error-handling-conversion: "Use this step in the DevOps Toolkit workflow: Safe Type Conversion."
  error-handling-dict-access: "Use this step in the DevOps Toolkit workflow: Safe Dict Access."
  error-handling-file-read: "Use this step in the DevOps Toolkit workflow: Safe File Read."
  export-orders-csv: "Use this step in the DevOps Toolkit workflow: Export Orders CSV."
  file-read-to-list: "Use this step in the DevOps Toolkit workflow: File Lines to List."
  file-write-from-list: "Use this step in the DevOps Toolkit workflow: List to File."
  filter-list-of-dicts: "Use this step in the DevOps Toolkit workflow: Filter List of Dicts."
  filter-orders-fn: "Use this step in the DevOps Toolkit workflow: Filter Orders Function."
  for-else: "Use this step in the DevOps Toolkit workflow: For-Else Clause."
  fstring-from-dict: "Use this step in the DevOps Toolkit workflow: F-String from Dict."
  health-check-dataclass-integrated: "Use this step in the DevOps Toolkit workflow: Health Check with Logging."
  high-value-orders-comp: "Use this step in the DevOps Toolkit workflow: High-Value Orders."
  import-json-parse: "Use this step in the DevOps Toolkit workflow: JSON Parse."
  input-to-int: "Use this step in the DevOps Toolkit workflow: Input to Integer."
  inventory-dict-comp: "Use this step in the DevOps Toolkit workflow: Inventory Dict Comprehension."
  inventory-item-class: "Use this step in the DevOps Toolkit workflow: Inventory Product Class."
  inventory-reorder-loop: "Use this step in the DevOps Toolkit workflow: Inventory Reorder List."
  list-dedup-preserve-order: "Use this step in the DevOps Toolkit workflow: Deduplicate List (Order-Preserving)."
  list-to-dict-conversion: "Use this step in the DevOps Toolkit workflow: List of Tuples to Dict."
  loop-dict-accumulate: "Use this step in the DevOps Toolkit workflow: Dict Value Accumulator."
  loop-nested-flatten: "Use this step in the DevOps Toolkit workflow: Flatten Nested List."
  number-round-format: "Use this step in the DevOps Toolkit workflow: Round and Format."
  number-stats-from-list: "Use this step in the DevOps Toolkit workflow: List Statistics."
  order-status-ternary: "Use this step in the DevOps Toolkit workflow: Paid Status Label."
  order-total-method: "Use this step in the DevOps Toolkit workflow: Order Total Method."
  orders-parse-to-records: "Use this step in the DevOps Toolkit workflow: Order Lines to Records."
  orders-total-accumulator: "Use this step in the DevOps Toolkit workflow: Order Totals Summary."
  parse-events-log: "Use this step in the DevOps Toolkit workflow: Parse Events Log."
  parse-quantity-safe: "Use this step in the DevOps Toolkit workflow: Parse Quantity Safely."
  process-orders-with-guard: "Use this step in the DevOps Toolkit workflow: Order Processing Cleanup."
  product-tags-to-set: "Use this step in the DevOps Toolkit workflow: Product Tags Set."
  retry-decorator-integrated: "Use this step in the DevOps Toolkit workflow: Retry Connection Decorator."
  sort-dict-by-value: "Use this step in the DevOps Toolkit workflow: Sort Dict by Value."
  sorted-key-lambda: "Use this step in the DevOps Toolkit workflow: Sorted with Lambda Key."
  string-join-transformed: "Use this step in the DevOps Toolkit workflow: Transform and Join."
  string-split-filter: "Use this step in the DevOps Toolkit workflow: Split and Filter."
  summarize-customers: "Use this step in the DevOps Toolkit workflow: Count Active Customers."
  typehint-callable: "Use this step in the DevOps Toolkit workflow: Type Hint Callable."
  validate-order-status: "Use this step in the DevOps Toolkit workflow: Validate Order Status."
